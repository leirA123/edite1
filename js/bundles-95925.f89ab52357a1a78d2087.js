"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[95925],{813652:(t,e,i)=>{i.d(e,{Version:()=>n});var r=i(588537);class n{constructor(t,e){this._major=t,this._minor=e}major(){return this._major}minor(){return this._minor}isZero(){return 0===this._major&&0===this._minor}toString(){return this._major+"."+this._minor}compareTo(t){return this._major<t._major?-1:this._major>t._major?1:this._minor<t._minor?-1:this._minor>t._minor?1:0}isLess(t){return this.compareTo(t)<0}isLessOrEqual(t){return this.compareTo(t)<=0}isEqual(t){return 0===this.compareTo(t)}isGreater(t){return this.compareTo(t)>0}isGreaterOrEqual(t){return this.compareTo(t)>=0}static parse(t){if(t instanceof n)return new n(t.major(),t.minor());if("number"==typeof t)return(0,r.assert)(Math.floor(t)===t,"Version should not be a float number"),new n(t,0);if("string"==typeof t){const e=t.split(".");if(1===e.length){const i=parseInt(e[0],10);return(0,r.assert)(!isNaN(i),"Bad version string: "+t),new n(i,0)}if(2===e.length){const i=parseInt(e[0],10);(0,r.assert)(!isNaN(i),"Bad version string: "+t);const o=parseInt(e[1],10);return(0,r.assert)(!isNaN(o),"Bad version string: "+t),new n(i,o)}throw new Error("Bad version string (one dot expected): "+t)}throw new Error("Bad version: "+t)}}n.ZERO=new n(0,0)},469411:(t,e,i)=>{i.d(e,{patchSourceState:()=>n});var r=i(787236);function n(t){const e={palettes:{},inputs:[{defval:2,id:"upper diviation",max:500,min:-500,name:(0,r.t)("Upper Deviation"),type:"integer"},{defval:-2,id:"lower diviation",max:500,min:-500,name:(0,r.t)("Lower Deviation"),type:"integer"},{defval:!0,id:"use upper diviation",name:(0,r.t)("Use Upper Deviation"),type:"bool"},{defval:!0,id:"use lower diviation",name:(0,r.t)("Use Lower Deviation"),type:"bool"},{defval:0,id:"first bar time",max:253370764800,min:0,name:(0,r.t)("First bar time"),type:"time"},{defval:0,id:"last bar time",max:253370764800,min:0,name:(0,r.t)("Last bar time"),type:"time"},{defval:"close",id:"source",name:(0,r.t)("Source"),options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"}],plots:[],graphics:{},defaults:{inputs:{"first bar time":0,"last bar time":0,"lower diviation":-2,source:"close","upper diviation":2,"use lower diviation":!0,"use upper diviation":!0}},_metainfoVersion:6,description:"Regression Trend",id:"RegressionTrend@tv-basicstudies",is_price_study:!0,shortDescription:"Reg Trend",shortId:"RegressionTrend",version:"2",fullId:"RegressionTrend@tv-basicstudies-2",name:"RegressionTrend@tv-basicstudies"};return t.metaInfo||(t.metaInfo=e),t}},344265:(t,e,i)=>{var r=i(281640);function n(t){var e=JSON.stringify(t);return e=e.replace(/'/g,"\\'")}t.exports={formatCallstudyArg:n,prepareCallStudyArgs:function(t,e){var i={};if(e.isTVScript){var o=e.defaults.inputs.text;i.text=r.patchILTemplate(o,e,t)}else for(var s=Object.keys(t),a=s.length-1;a>=0;a--){var u=s[a],l=t[u]?t[u].id:null;l&&t[l]&&(i[l]=t[l])}return n(i)}}},902105:(t,e,i)=>{i.d(e,{generateSplitTitleForGui:()=>a,generateTitleForGui:()=>u});var r=i(588537),n=i(787236),o=i(773547)
;function s(t,e){return(Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toString()||""}function a(t){const e="QUANDL"===(t=t||{}).exchange,i={title:"",description:"",interval:"",exchange:"",provider:"",chartStyle:"",sessionDescription:""};let a="";if(t.description&&e)if(2===t.description.split("/").length)a=t.description.split("/")[1];else{t.description.split("'").filter(t=>t.length).forEach(t=>{let e=[];e=t&&("/"===t[0]||/\d+\/\(?/.test(t))?[t]:t.split("/").filter(t=>t.length),a+=e[2===e.length?1:0]})}else a=t.description?t.description:t.symbol;if(t.ticker?(i.title=t.ticker,i.description=l(a)):i.title=l(a),t.interval&&(i.interval=(0,o.translatedIntervalString)(t.interval)),e&&t.description){const e=/[\w_]+\/[\w_]+/.exec(t.description);e&&e[0]?i.provider=l(e[0].split("/")[0]):i.provider=l(t.description.split("/")[0])}return t.exchange&&(i.exchange=l(t.exchange)),i.chartStyle=l(function(t){const e=t.inputs;switch(t.style){case 4:const i=e.style+("ATR"===e.style?`(${e.atrLength})`:""),o=(0,r.ensureDefined)(t.boxSize||e.boxSize);return`${(0,n.t)("Renko")} [${i}, ${s(o,4)}]`;case 7:return`${(0,n.t)("Line Break")} [${e.lb}]`;case 5:const a=e.style+("ATR"===e.style?`(${e.atrLength})`:""),u=t.reversalAmount||e.reversalAmount,l=void 0!==u?", "+s(u,8):"";return`${(0,n.t)("Kagi")} [${a}${l}]`;case 6:const d=`${e.style}${"ATR"===e.style?"("+e.atrLength+")":""}`,p=t.boxSize||e.boxSize;return`${(0,n.t)("PnF")} [${d}, ${s((0,r.ensureDefined)(p),8)}, ${e.reversalAmount}]`}return 11===t.style?(0,n.t)("Range"):8===t.style?(0,n.t)("Heikin Ashi"):""}(t)),t.branding&&!a.toUpperCase().includes("TradingView".toUpperCase())&&(i.branding="TradingView"),t.sessionDescription&&(i.sessionDescription=l(t.sessionDescription)),i}function u(t){const e=a(t);return(t.ticker?e.description:e.title)+(e.interval?", "+e.interval:"")+function(t,e=", "){return(t.provider?`${e}${t.provider}`:"")+(t.exchange?`${e}${t.exchange}`:"")+(t.chartStyle?`${e}${t.chartStyle}`:"")+(t.branding?`${e}${t.branding}`:"")+(t.sessionDescription?`${e}${t.sessionDescription}`:"")}(e)}function l(t){return t.replace(/'/g,"")}},457118:(t,e,i)=>{i.d(e,{migrateMetaInfoAndPropState:()=>u});var r=i(588537),n=i(970028),o=i.n(n),s=i(270617);const a=[new class{targetMetaInfoVersion(){return 47}migrateMetaInfo(t){const e=t,i=t;if(i._metainfoVersion=47,!e.defaults||void 0===e.defaults.precision)return void(i.format={type:"inherit"});const r=e.defaults&&e.defaults.precision,n=(0,s.isNumber)(r)?r:parseInt(r);0===n?i.format={type:"volume"}:isFinite(n)?i.format={type:"price",precision:n}:i.format={type:"inherit"},delete e.defaults.precision}migratePropState(t){}},new class{targetMetaInfoVersion(){return 50}migrateMetaInfo(t){const e=t,i=t;if(i._metainfoVersion=50,void 0===e.defaults||void 0===e.defaults.ohlcPlots||void 0===e.ohlcPlots)return;const n=e.ohlcPlots,o=e.defaults.ohlcPlots,s=(0,r.ensureDefined)((0,r.ensureDefined)(i.defaults).ohlcPlots);for(const t of Object.keys(o)){const e=o[t];if("ohlc_candles"===e.plottype){let i=!1;const r=n[t];void 0!==r&&(i=!!r.drawBorder,delete r.drawBorder),
s[t]={borderColor:"#000000",drawBorder:i,...e}}}}migratePropState(t){}}];function u(t,e){const i=o().versionOf(t),n=t;void 0===n._serverMetaInfoVersion&&(n._serverMetaInfoVersion=i),a.forEach(n=>{i<0||i>=n.targetMetaInfoVersion()||(n.migrateMetaInfo(t),void 0!==e&&n.migratePropState(e),(0,r.assert)(t._metainfoVersion===n.targetMetaInfoVersion()))})}a.sort((function(t,e){return t.targetMetaInfoVersion()-e.targetMetaInfoVersion()}))},244276:(t,e,i)=>{function r(t,e){return`${t}@${e}`}function n(t){return t.replace(/(@[^-]+-[^-]+).*$/,"$1")}i.d(e,{studyIdString:()=>r,extractStudyId:()=>n})},349692:(t,e,i)=>{i.r(e),i.d(e,{collectDepsForAlert:()=>h,dependenciesForAlerts:()=>I,idForAlert:()=>g,patchChildIdInInputs:()=>y,plotsForAlert:()=>v});var r=i(588537),n=i(911905),o=i(290557);var s=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},a=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var r in t)e.call(t,r)&&i.push(r);return i},u=i(244276),l=i(970028),d=i.n(l),p=i(418458),c=i(270617);const f=(0,n.getLogger)("Chart.Study");function y(t,e,i){void 0!==e&&void 0!==i&&i.forEach(i=>{const r=t[i];if("string"==typeof r){const n=r.split("$")[1];t[i]=e+(void 0===n?"":"$"+n)}else if((0,c.isObject)(r)&&"source"===r.t){const t=r.v.split("$")[1];r.v=e+(void 0===t?"":"$"+t)}else f.logError("Cannot patch source input, its type is not source: "+JSON.stringify(r))})}function g(t,e,i){return(0,o.hash)(t+function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var i=e.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var r,n="boolean"==typeof e.cycles&&e.cycles,o=e.replacer||function(t,e){return e},u=e.cmp&&(r=e.cmp,function(t){return function(e,i){var n={key:e,value:t[e]},o={key:i,value:t[i]};return r(n,o)}}),l=[];return function t(e,r,d,p){var c=i?"\n"+new Array(p+1).join(i):"",f=i?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=o.call(e,r,d))){if("object"!=typeof d||null===d)return JSON.stringify(d);if(s(d)){for(var y=[],g=0;g<d.length;g++){var v=t(d,g,d[g],p+1)||JSON.stringify(null);y.push(c+i+v)}return"["+y.join(",")+c+"]"}if(-1!==l.indexOf(d)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(d);var h=a(d).sort(u&&u(d));for(y=[],g=0;g<h.length;g++){var I=t(d,r=h[g],d[r],p+1);if(I){var S=JSON.stringify(r)+f+I;y.push(c+i+S)}}return l.splice(l.indexOf(d),1),"{"+y.join(",")+c+"}"}}({"":t},"",t,0)}(e)+(null!=i?i:"")).toString()}function v(t,e,i){const n=[p.isLinePlot,p.isShapesPlot,p.isCharsPlot,p.isArrowsPlot,p.isOhlcPlot,p.isAlertConditionPlot];return t.plots.map((t,e)=>({...t,pinePlotIndex:e})).filter(t=>!(void 0!==i&&!i.includes(t.id))&&n.some(e=>e(t))).map(i=>{const n={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:e(i.id)};if(t.styles&&void 0!==t.styles[i.id]){const e=(0,r.ensureDefined)((0,r.ensureDefined)(t.styles)[i.id]);n.title=e.title||"",n.text=e.text||""}return(0,p.isOhlcPlot)(i)&&i.target&&t.ohlcPlots&&t.ohlcPlots[i.target]&&(n.ohlcTitle=(0,
r.ensureDefined)((0,r.ensureDefined)(t.ohlcPlots)[i.target]).title),n})}function h(t,e){const i=[];let n,o;for(let r=t.length-1;r>=0;r--){const s=t[r],a=(0,u.extractStudyId)(s.metaInfo().id),l=d().getStudyIdWithLatestVersion(s.metaInfo());o=s.inputsForAlertState();y(o,n,s.metaInfo().inputs.filter(t=>"source"===t.type).map(t=>t.id));const p=Object.assign({},o);s.metaInfo().isTVScript&&delete p.text;const c=g(a,p,e);i.push({id:c,study:l,inputs:o}),n=c}return{idForAlert:(0,r.ensureDefined)(n),inputsForAlert:(0,r.ensureDefined)(o),studyDependencies:i.reverse()}}function I(t,e){return t.map(t=>{const i=t.inputs(),r=t.metaInfo();let n=d().cutDollarHash(r.fullId);if("tv-scripting"===r.productId){const t=e.findByIdSync({type:"java",studyId:"Script@tv-scripting"});null!==t&&(n=t.fullId)}const o={id:t.sourceId(),study:n,inputs:i,scriptIdPart:void 0,scriptVersion:void 0};return r.pine?{...o,scriptIdPart:r.scriptIdPart,scriptVersion:r.pine.version}:o})}},594930:(t,e,i)=>{i.d(e,{applyOverridesToStudy:()=>l,applyOverridesToStudyDefaults:()=>d});var r=i(588537),n=i(418458);const o=(0,i(911905).getLogger)("Chart.Model.StudyPropertiesOverrider");var s,a;function u(t,e,i,r){const n=i.split(".");if(0===n.length||0===n[0].length)return;const u=function(t){const e=t.split(":");return{name:e[0],type:2===e.length?e[1]:null}}(n[0]),l=u.name,d=u.type,p=null!==d,c=!p||"band"===d,f=!p||"area"===d,y=!p||"input"===d,g=!p||"plot"===d?a.getPlotIdByTitle(t,l):null,v=c?a.getBandIndexByName(t,l):null,h=f?a.getFilledAreaIdByTitle(t,l):null,I=y?a.getInputByName(t,l):null,S=e.hasOwnProperty(l);if((null!==g?1:0)+(null!==v?1:0)+(null!==h?1:0)+(null!==I?1:0)+(S?1:0)>1)return void o.logWarn(`Study '${t.description}' has ambiguous identifier '${l}'`);const m=n[1];if(null!==g){if(1===n.length)return void o.logWarn(`Path of sub-property of '${l}' plot for study '${t.description}' must be not empty`);const i=n.slice(1);s.applyPlotProperty(t,e,g,i,r)}else if(null!==I)s.applyInputValue(e,I,r);else if(null!==v){if(void 0===m)return void o.logWarn(`Property name of '${l}' band for study '${t.description}' must be set`);s.applyBandProperty(e,v,m,r)}else if(null!==h){if(void 0===m)return void o.logWarn(`Property name of '${l}' area for study '${t.description}' must be set`);s.applyFilledAreaProperty(e,h,m,r)}else S?s.setRootProperty(e,n,r):o.logWarn(`Study '${t.description}' has no plot or input '${l}'`)}function l(t,e){const i=t.properties(),r=i.state();for(const i in e)e.hasOwnProperty(i)&&u(t.metaInfo(),r,i,e[i]);i.mergeAndFire(r)}function d(t,e,i){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=r.indexOf(".");if(-1===n)continue;const s=r.substring(0,n),l=a.getMetaInfoByDescription(e,s);if(null===l){o.logWarn("There is no such study "+s);continue}const d=i(l);null!==d?u(l,d,r.substring(n+1),t[r]):o.logWarn("Cannot apply overrides for study "+s)}}!function(t){const e={line:n.LineStudyPlotStyle.Line,histogram:n.LineStudyPlotStyle.Histogram,cross:n.LineStudyPlotStyle.Cross,area:n.LineStudyPlotStyle.Area,columns:n.LineStudyPlotStyle.Columns,
circles:n.LineStudyPlotStyle.Circles,line_with_breaks:n.LineStudyPlotStyle.LineWithBreaks,area_with_breaks:n.LineStudyPlotStyle.AreaWithBreaks};t.applyPlotProperty=function(t,i,s,a,u){if(void 0===i.styles)return void o.logWarn("Study does not have styles");const l=a[0];if("color"===l){return void function(t,e,i,n,s){if(void 0!==t.styles)if(null===e&&!isNaN(n)&&n>0)o.logWarn("Study plot does not have color #"+n);else{if(0===n||isNaN(n)){(0,r.ensureDefined)(t.styles[i]).color=String(s),n=0}null!==e&&((0,r.ensureDefined)(e.colors[n]).color=String(s))}else o.logWarn("Study does not have styles")}(i,function(t,e,i){if(void 0===t.plots)return null;for(const r of t.plots){if(!(0,n.isColorerPlot)(r)||void 0===e.palettes)continue;const t=e.palettes[r.palette];if(r.target===i&&void 0!==t)return t}return null}(t,i,s),s,a.length>1?parseInt(a[1]):NaN,u)}const d=i.styles[s];if(void 0!==d&&d.hasOwnProperty(l)){if("plottype"===l){const t=e[String(u)];if(void 0===t)return void o.logWarn("Unsupported plot type for plot: "+u);u=t}d[l]=u}else o.logWarn(`Study plot does not have property '${l}'`)},t.applyBandProperty=function(t,i,r,n){if(void 0===t.bands)return void o.logWarn("Study does not have bands");const s=t.bands[i];if(void 0!==s&&s.hasOwnProperty(r)){if("plottype"===r){const t=e[String(n)];if(void 0===t)return void o.logWarn("Unsupported plot type for band: "+n);n=t}s[r]=n}else o.logWarn(`Study band does not have property '${r}'`)},t.applyFilledAreaProperty=function(t,e,i,r){if(void 0===t.filledAreasStyle)return void o.logWarn("Study does not have areas");const n=t.filledAreasStyle[e];void 0!==n&&n.hasOwnProperty(i)?n[i]=r:o.logWarn(`Study area does not have property '${i}'`)},t.applyInputValue=function(t,e,i){void 0!==t.inputs&&t.inputs.hasOwnProperty(e)?t.inputs[e]=i:o.logWarn(`Study does not have input '${e}'`)},t.setRootProperty=function(t,e,i){if(0===e.length)return;let r=t;for(const t of e.slice(0,-1)){if(null==r||!r.hasOwnProperty(t))break;r=r[t]}const n=e[e.length-1];null!=r&&r.hasOwnProperty(n)?r[n]=i:o.logWarn("Study does not have property "+e.join("."))}}(s||(s={})),function(t){t.getInputByName=function(t,e){if(void 0===t.inputs)return null;e=e.toLowerCase();for(const i of t.inputs)if(i.name.toLowerCase()===e)return i.id;return null},t.getPlotIdByTitle=function(t,e){if(void 0===t.styles)return null;e=e.toLowerCase();for(const i in t.styles){const r=t.styles[i];if((void 0!==r&&void 0!==r.title?r.title:i).toLowerCase()===e)return i}return null},t.getFilledAreaIdByTitle=function(t,e){if(void 0===t.filledAreas)return null;e=e.toLowerCase();for(const i of t.filledAreas)if(i.title.toLowerCase()===e)return i.id;return null},t.getBandIndexByName=function(t,e){if(void 0===t.bands)return null;e=e.toLowerCase();for(let i=0;i<t.bands.length;++i)if(t.bands[i].name.toLowerCase()===e)return i;return null},t.getMetaInfoByDescription=function(t,e){e=e.toLowerCase();for(const i of t)if(i.description.toLowerCase()===e||i.shortDescription.toLowerCase()===e)return i;return null}}(a||(a={}))},170112:(t,e,i)=>{
var r=i(813652).Version,n=i(911905).getLogger("Chart.StudyMigration");function o(t){this._studyId=t,this._maxToVers=r.ZERO,this._maxFromVers=r.ZERO,this._migrs=[]}o.prototype.addMigration=function(t,e,i){var n=r.parse(t),o=r.parse(e);n.isGreater(this._maxFromVers)&&(this._maxFromVers=n),o.isGreater(this._maxToVers)&&(this._maxToVers=o),this._migrs.push({fromVers:n,toVers:o,rules:i})},o.prototype.updateInputs=function(t,e,i){if(!i)return i;for(var r=TradingView.clone(i),o=t;o.isLess(e);){var s=this._findMigration(o);if(null==s)break;if(n.logNormal("Migrating study inputs from "+s.fromVers+" to "+s.toVers+" version, studyId: "+this._studyId+", migration: "+JSON.stringify(s)+", inputs: "+JSON.stringify(i)),r=this._applyMigration(r,s),!o.isLess(s.toVers))throw new Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");o=s.toVers}return o>t&&n.logNormal("Study inputs migration is done, studyId: "+this._studyId+", inputs: "+JSON.stringify(r)),r},o.prototype._findMigration=function(t){for(var e=-1,i=this._maxFromVers,r=0;r<this._migrs.length;r++){var n=this._migrs[r];n.fromVers.isLess(t)||n.fromVers.isLessOrEqual(i)&&(i=n.fromVers,e=r)}return e<0?null:this._migrs[e]},o.prototype._applyMigration=function(t,e){for(var i=t,r=0;r<e.rules.length;r++){var n=e.rules[r];i=this._getApplyRuleFun(n.type)(i,n)}return i},o.prototype._getApplyRuleFun=function(t){if("inputRemoved"===t)return o._applyInputRemovedRule;if("inputChangedType"===t)return o._applyInputChangedTypeRule;if("inputChangedMinMax"===t)return o._applyInputChangedMinMaxRule;if("inputChangedOptions"===t)return o._applyInputChangedOptionsRule;throw new Error("Unknown migration rule type: "+t)},o._applyInputRemovedRule=function(t,e){if(!(e.inputId in t))return t;if("removeVal"!==e.action)throw new Error("Unexpected rule.action="+e.action+" in rule.type="+e.type);var i=t[e.inputId];return delete t[e.inputId],n.logNormal("Input "+e.inputId+"="+i+" removed"),t},o._applyInputChangedTypeRule=function(t,e){var i=t[e.inputId];if("resetToDefVal"===e.action)return t[e.inputId]=e.defVal,n.logNormal("Input "+e.inputId+"="+i+" reset to default value "+e.defVal),t;if("convertVal"===e.action){if(null==i)return t;if("float"===e.inputTypeFrom&&"integer"===e.inputType)return t[e.inputId]=Math.round(t[e.inputId]),n.logNormal("Input "+e.inputId+"="+i+" converted to value "+t[e.inputId]),t;if("integer"===e.inputTypeFrom&&"float"===e.inputType)return t;if("text"===e.inputTypeFrom&&"source"===e.inputType)return o._isValidSource(i,e.options)||(t[e.inputId]=e.defVal),t;throw new Error("Cannot convertVal from "+e.inputTypeFrom+" to "+e.inputType)}throw new Error("Unknown action "+e.action+" for rule with type "+e.type)},o._isValidSource=function(t,e){return t.indexOf("$")>=0||e.indexOf(t)>=0},o._applyInputChangedMinMaxRule=function(t,e){if("adjustValIfNeeded"!==e.action)throw new Error("Unknown action "+e.action+" for rule with type "+e.type);var i=t[e.inputId];return i<e.minVal?t[e.inputId]=e.minVal:i>e.maxVal&&(t[e.inputId]=e.maxVal),
n.logNormal("Input "+e.inputId+"="+i+" adjusted to value "+t[e.inputId]),t},o._applyInputChangedOptionsRule=function(t,e){if(!(["text"].indexOf(e.inputType)>=0&&"resetToDefValIfNeeded"===e.action))throw new Error("Unexpected rule.inputType="+e.inputType+" in rule.action="+e.action);var i=t[e.inputId];return e.options.indexOf(i)<0&&(t[e.inputId]=e.defVal,n.logNormal("Input "+e.inputId+"="+i+" reset to default value "+e.defVal)),t},t.exports=o},610498:(t,e,i)=>{var r=i(588537).assert,n=i(469411).patchSourceState,o=i(366156),s=i(813652).Version,a=i(911905).getLogger("Chart.Study.Versioning"),u=i(66974),l=i(970028),d=i(971417).extractPineId,p=i(457118).migrateMetaInfoAndPropState;function c(t,e){if(!t)throw new Error("No studies metainfo");var r=i(170112);if(this._studiesMetainfo=t,!e)throw new Error("No studies migrations");this._studiesMigrations=e,this._migrations={};for(var n=0;n<this._studiesMigrations.length;n++)for(var o=this._studiesMigrations[n],s=o.versFrom,u=o.versTo,l=0;l<o.studyMigrations.length;l++){var d=o.studyMigrations[l],p=d.studyId;if(0!==d.rules.length){var c=p in this._migrations?this._migrations[p]:new r(p);c.addMigration(s,u,d.rules),this._migrations[p]=c}else a.logError("Study Migration should have at least one convertion rule")}this._clientMigrations=[function(t,e){if(0===this._studiesMetainfo.length||!t.isTVScript||t.version>=22)return e;for(var i={},r=0,n=0;;){var o=e[n];if(void 0===o)break;var s=e[o.id];o.isFake&&(o.id="in_"+r++),i[n]=o,i[o.id]=s,n++}return i}]}c.prototype.updateMetaInfo=function(t){if(!t)return t;r(!t.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync");for(var e=null,i=this._studiesMetainfo,n=0;n<i.length;n++)if(i[n].id===t.id){e=i[n];break}return TradingView.clone(e)},c.prototype.updateMetaInfoAsync=function(t){if(!t)return{sync:!1,result:Promise.reject("No old metaInfo was given")};var e=new l(t),i=l.versionOf(t);if(t.isTVScript&&!t.pine&&i<l.VERSION_PINE_PROTECT_TV_4164){r(TradingView.isExistent(t.scriptIdPart),"scriptIdPart is missing, study "+JSON.stringify(t));var n=t.scriptIdPart;return{sync:!1,result:new Promise((function(i,r){o.processLegacy(n,t.TVScriptSourceCode).done((function(t){e.removeDefaults();var r=new l(t);r.createDefaults(),p(r),i(r)})).fail((function(t,e){r(t)}))}))}}if(t.isTVScript&&t.pine)return(t._serverMetaInfoVersion||i)<l.CURRENT_METAINFO_FORMAT_VERSION?{sync:!1,result:new Promise((function(i,r){o.translateScriptAsync2(t.scriptIdPart,t.pine.version).done((function(t){e.removeDefaults();var r=new l(t);r.createDefaults(),p(r),i(r)})).fail((function(t,e){r(t)}))}))}:(e.createDefaults(),{sync:!0,result:e});for(var s=null,a=this._studiesMetainfo,u=0;u<a.length;u++)if(a[u].id===t.id){s=a[u];break}return{sync:!0,result:s?TradingView.clone(s):null}},c.prototype.lastVersionOfStudy=function(t){return this._studiesMetainfo.find((function(e){return e.id===t})).version},c.prototype.updateStudyInputs=function(t,e,i,r,n){var o=TradingView.clone(r);if(t in this._migrations){var u,l=s.parse(e)
;if("last"===i){var d=this.lastVersionOfStudy(t);u=s.parse(d)}else u=s.parse(i);o=this._migrations[t].updateInputs(l,u,o)}if(null==n)return o;for(var p in n)p in o||(o[p]=n[p]);for(var p in o)if(!(p in n)){var c=o[p];a.logWarn("Extra input detected, studyId="+t+", versionFrom="+e+", inputId="+p+", inputValue="+c+", removing it and continue..."),delete o[p]}return o},c.prototype.updateStudyState=function(t,e,i){if(null==t||null==e||null==i)return t;if(t=TradingView.clone(t),!(e.isTVScript||!!e.pine)&&e.version!==i.version){var r=i&&i.defaults.inputs,n=this.updateStudyInputs(e.id,e.version,i.version,t.inputs,r);t.inputs=n}for(var o=0;o<this._clientMigrations.length;++o){n=this._clientMigrations[o].call(this,e,t.inputs);Object.keys(n).length===Object.keys(t.inputs).length?t.inputs=n:a.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...")}var s=l.versionOf(e);if(e.isTVScript&&e.TVScriptSourceCode&&s>=12&&s<=26){var u={};for(o=0;o<e.plots.length;++o){var d=e.plots[o],p=i.plots[o];u[d.id]=p.id}var c=Object.keys(t.styles);for(o=0;o<c.length;++o){var f=c[o],y=t.styles[f];delete t.styles[f];var g=u[f];t.styles[g]=y}var v=Object.keys(t.plots);for(o=0;o<v.length;++o){var h=v[o];f=t.plots[h].id;t.plots[h].id=u[f]}}return t},c.prototype.patchPointsBasedStudyState=function(t){return c._fixInputsMaxValue(t.state,t.metaInfo),"LineToolRegressionTrend"===t.type&&(t=n(t)),t},c.prototype.patchPointsBasedStudyData=function(t,e){if(!u.isProd())return e;if(!t||!e)return e;var i=TradingView.clone(e);return"VbPFixed@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&c._patchOldVolumeProfiles(0,i),i},c.prototype.patchStudyData=function(t,e,i,r){if(!u.isProd())return{data:e,nsData:i,indexes:r};var n=TradingView.clone(e),o=TradingView.clone(i),s=TradingView.clone(r);"VbPVisible@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&c._patchOldVolumeProfiles(0,n.graphics),"VbPSessions@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&c._patchOldVolumeProfiles(0,n.graphics);var a=l.versionOf(t);if(t.isTVScript&&t.TVScriptSourceCode&&a>=12&&a<=26){var d=n.columns;n.columns=[];for(var p=0;p<d.length;++p){var f="plot_"+p;n.columns.push(f)}}return{data:n,nsData:o,indexes:s}},c._patchOldVolumeProfiles=function(t,e){var i=e.hhists[t].data,r=[];for(var n in i)r=r.concat(i[n]);e.hhists[0].data=r},c._fixInputsOrder=function(t,e){for(var i=l.getOrderedInputIds(e),r=c.splitInputs(t.inputs),n=r.arr,o=r.obj,s=TradingView.merge({},o),a=0;a<i.length;++a){var u=i[a],d=c.findInputKeyById(n,u);if(null!==d){var p=n[d];s[a]=p}}t.inputs=s},c.INPUT_MAX_VALUE=1e12,c._verifyInputsMaxValue=function(t){var e=c.INPUT_MAX_VALUE;if(t.inputs)for(var i=0;i<t.inputs.length;i++){var r=t.inputs[i];"integer"===r.type&&(r.max&&r.max>e&&a.logWarn("Bad integer input max value in metaInfo id="+t.id+" title="+t.description))}},c._fixInputsMaxValue=function(t,e){if(!TradingView.isAbsent(e)){var i=c.INPUT_MAX_VALUE;if(e.inputs)for(var r=0;r<e.inputs.length;r++){"integer"===(a=e.inputs[r]).type&&(a.max&&a.max>i&&(a.max=i))}if(t&&t.inputs){
var n=c.splitInputs(t.inputs),o=n.arr;for(var s in o){var a;"integer"===(a=o[s]).type&&(a.max&&a.max>i&&(a.max=i))}t.inputs=TradingView.merge(n.obj,n.arr)}}},c.prototype.patchPropsStateAndMetaInfo=function(t,e,i){"Script$BOOKER"!==e.productId||e.alerts||delete t.alerts,c._fixInputsOrder(t,e),c._fixInputsMaxValue(t,e);var r=c.splitInputs(t.inputs);t.inputs=r.obj;var n=l.versionOf(e);n<l.METAINFO_FORMAT_VERSION_SOS_V2&&e.isChildStudy&&(t.isChildStudy=e.isChildStudy);if(e.isTVScript&&e.version<60&&("Script$TV_EARNINGS@tv-scripting"!==e.id&&"Script$TV_DIVIDENDS@tv-scripting"!==e.id&&"Script$TV_SPLITS@tv-scripting"!==e.id||delete e.TVScriptSourceCode),"Volume"!==e.id&&"Volume@tv-basicstudies"!==e.id||0!==e.inputs.length||(e.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],e.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===e.id&&e.version&&e.version<=46&&void 0===t.styles.vol.transparency&&(t.styles.vol.transparency=t.transparency||87),"PivotPointsStandard@tv-basicstudies"===e.id&&(0===e.inputs.length?(t.inputs={kind:"Traditional",showHistoricalPivots:!0},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===e.inputs.length&&(t.inputs={kind:"Traditional"},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===t._hardCodedDefaultsVersion)){t._hardCodedDefaultsVersion=1;var o=t.color;delete t.color,t.levelsStyle={colors:{P:o,"S1/R1":o,"S2/R2":o,"S3/R3":o,"S4/R4":o,"S5/R5":o}}}"CMF"===e.shortId&&2===e.inputs.length&&(t.inputs={length:t.inputs["length fast"]},e.inputs=e.inputs.splice(0,1),e.inputs[0].id="length"),e.defaults&&void 0===e.defaults.precision&&n<l.VERSION_NEW_STUDY_PRECISION_FORMAT&&(-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(e.id)?e.defaults.precision=0:e.defaults.precision=4);if(e.version<60)for(var s=["TV_DIVIDENDS","TV_SPLITS","TV_EARNINGS"],a="Script".length,u=0;u<s.length;u++)e.id.startsWith("Script$"+s[u]+"@tv-scripting")&&(e.fullId="ESD"+e.fullId.substring(a),e.id="ESD"+e.id.substring(a),e.name="ESD"+e.name.substring(a),e.shortId="ESD"+e.shortId.substring(a),e.productId="ESD"+e.productId.substring(a));var f={"ESD$TV_EARNINGS@tv-scripting":{fullId:"Earnings@tv-basicstudies-129!",id:"Earnings@tv-basicstudies",name:"Earnings@tv-basicstudies",shortId:"Earnings",productId:"tv-basicstudies"},"ESD$TV_SPLITS@tv-scripting":{fullId:"Splits@tv-basicstudies-129!",id:"Splits@tv-basicstudies",name:"Splits@tv-basicstudies",shortId:"Splits",productId:"tv-basicstudies"},"ESD$TV_DIVIDENDS@tv-scripting":{fullId:"Dividends@tv-basicstudies-129!",id:"Dividends@tv-basicstudies",name:"Dividends@tv-basicstudies",shortId:"Dividends",productId:"tv-basicstudies"}};if(e.id in f&&Object.assign(e,f[e.id]),n<l.VERSION_PINE_PROTECT_TV_4164){var y={
"StrategyScript$STD;Consecutive%1Ups/Downs%1Strategy":{pineId:"STD;Consecutive%1Ups%1Downs%1Strategy",className:"StrategyScript"},Script$EDGR_NET_INCOME_FROM_CONTINUING_OPERATIONS_APPLICABLE_TO_COMMON_V2:{pineId:"Script$EDGR_NET_INCOME_FROM_CONTINUING_OPS_APPLICABLE_TO_COMMON_V2",className:"Script"}};if(e.shortId in y){var g=y[e.shortId].className+"$"+y[e.shortId].pineId,v={scriptIdPart:y[e.shortId].pineId,fullId:e.fullId.replace(e.shortId,g),id:e.id.replace(e.shortId,g),name:e.name.replace(e.shortId,g),shortId:g};TradingView.merge(e,v),TradingView.merge(t,v)}var h=d(e.fullId),I=h&&h.match(/^(USER)(_\d+)(;)(.*)$/);if(I){var S=I[0],m=I[1]+I[3]+I[2]+I[4];v={scriptIdPart:m,fullId:e.fullId.replace(S,m),id:e.id.replace(S,m),name:e.name.replace(S,m),shortId:e.shortId.replace(S,m)};TradingView.merge(e,v),TradingView.merge(t,v)}}if("MA"===e.id){var _=new l({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),T=new l({id:"MASimple",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),b=new l({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),V=new l({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}});switch(t.inputs.type){case"exp":e=_;break;case"simple":e=T;break;case"weighted":e=V;break;case"volume weighted":e=b}t.styles[e.plots[0].id]=t.styles.MovAvg,delete t.styles.MovAvg,delete t.inputs.type}return i.oldShowStudyLastValueProperty&&(t.oldShowLastValue=t.showLastValue),delete t.showLastValue,delete t.showStudyArguments,p(e,t),{propsState:t,metaInfo:e}},c.mergeInputs=function(t,e){c.mergeInputsArrPart(t,e),c.mergeInputsObjPart(t,e)},c.mergeInputsArrPart=function(t,e){var i=c.splitInputs(e);for(var r in i.arr){var n=c.findInputKeyById(t,i.arr[r].id);n?TradingView.merge(t[n],i.arr[r]):c.appendInputInfoToArr(t,i.arr[r])}},c.mergeInputsObjPart=function(t,e){var i=c.splitInputs(e);TradingView.merge(t,i.obj)},c.appendInputInfoToArr=function(t,e){var i=-1;for(var r in t){var n=parseInt(r,10);isNumber(n)&&(n>i&&(i=n))}t[i+1]=e},c.splitInputs=function(t){var e={},i={};for(var r in t)isNumber(parseInt(r,10))?e[r]=t[r]:i[r]=t[r];return{arr:e,obj:i}},c.findInputKeyById=function(t,e){var i=null;for(var r in t)if(isNumber(parseInt(r,10))&&t[r].id===e){i=r;break}return i},
c.getInputKeyById=function(t,e){var i=c.findInputKeyById(t,e);if(!i)throw new Error("Cannot find input with id: "+e);return i},t.exports=c},773547:(t,e,i)=>{i.d(e,{translatedIntervalString:()=>n});i(787236);var r=i(364019);function n(t){const e=(0,r.getTranslatedResolutionModel)(t,!0);return null===e?t:e.multiplier+(e.mayOmitShortKind?"":e.shortKind)}},970028:(t,e,i)=>{t=i.nmd(t);var r=i(232567),n=i(911905).getLogger("Chart.Study.MetaInfo"),o=i(594930).applyOverridesToStudyDefaults,s=i(520533).PineKind,a={};function u(t){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,t);var e=t.fullId||t.id;TradingView.merge(this,u.parseIdString(e))}u.VERSION_STUDY_ARG_SOURCE=41,u.METAINFO_FORMAT_VERSION_SOS_V2=42,u.VERSION_PINE_PROTECT_TV_4164=43,u.CURRENT_METAINFO_FORMAT_VERSION=52,u.VERSION_NEW_STUDY_PRECISION_FORMAT=46,u.CHILD_STUDY_ALLOWED_PLOT_TYPES=["line"],u.canPlotBeSourceOfChildStudy=function(t){return u.CHILD_STUDY_ALLOWED_PLOT_TYPES.includes(t)},u.CHILD_STUDY_EXCLUDE_IDS=["CorrelationCoefficient@tv-basicstudies","Correlation - Log@tv-basicstudies-1"],u.CHILD_STUDY_PARENT_EXCLUDE_IDS=[],u.FilledArea={},u.FilledArea.TYPE_PLOTS="plot_plot",u.FilledArea.TYPE_HLINES="hline_hline",u.versionOf=function(t){var e="_metainfoVersion"in t&&isNumber(t._metainfoVersion)?t._metainfoVersion:0;return e<0&&n.logError("Metainfo format version cannot be negative: "+e),e},u.parseIdString=function(t){var e={};if(-1===t.indexOf("@"))e.shortId=t,e.packageId="tv-basicstudies",e.id=t+"@"+e.packageId,e.version=1;else{var i=t.split("@");e.shortId=i[0];var r=i[1].split("-");if(3===r.length)e.packageId=r.slice(0,2).join("-"),e.id=e.shortId+"@"+e.packageId,e.version=r[2];else if(1===r.length&&"decisionbar"===r[0])e.packageId="les-"+r[0],e.id=e.shortId+"@"+e.packageId,e.version=1;else{if(1!==r.length)throw new Error("unexpected study id:"+t);e.packageId="tv-"+r[0],e.id=e.shortId+"@"+e.packageId,e.version=1}}if(e.fullId=e.id+"-"+e.version,"tv-scripting"===e.packageId){var n=e.shortId;if(0===n.indexOf("Script$")||0===n.indexOf("StrategyScript$")){var o=n.indexOf("_");e.productId=o>=0?n.substring(0,o):e.packageId}else e.productId=e.packageId}else e.productId=e.packageId;return e},u.getPackageName=function(t){return(/^[^@]+@([^-]+-[^-]+)/.exec(t||"")||[0,"tv-basicstudies"])[1]},u.cutDollarHash=function(t){var e=t.indexOf("$"),i=t.indexOf("@");return-1===e?t:t.substring(0,e)+(i>=0?t.substring(i):"")},u.hasUserIdSuffix=function(t){return/^USER;[\d\w]+;\d+$/.test(t)},u.isStandardPine=function(t){return/^(Strategy)?Script\$STD;.*@tv-scripting$/.test(t)},u.getSourceIdByInputs=function(t,e){if(!Array.isArray(t)||!e)return null;for(var i=0;i<t.length;++i){var r=t[i];if(u.isSourceInput(r)&&"string"==typeof e[r.id]){var n=e[r.id];return~n.indexOf("$")&&(n=n.split("$")[0]),n}}return null},u.getSourceInputIds=function(t){for(var e=[],i=t.inputs,r=0;r<i.length;++r){var n=i[r];u.isSourceInput(n)&&e.push(n.id)}return e},u.setChildStudyMetaInfoPropertiesSourceId=function(t,e,i){for(var n=0;n<t.inputs.length;++n){
var o=t.inputs[n];if(u.isSourceInput(o)&&(i instanceof r&&i.inputs&&i.inputs[o.id])){var s=i.inputs[o.id].value();if(s.indexOf("$")>0){var a=s.replace(/^[^\$]+/,e);i.inputs[o.id].setValue(a)}}}},u.patchChildStudyMetaInfoState=function(t){t.state&&function t(e){if("object"==typeof e)for(var i in e)"string"==typeof e[i]&&/^[^\$]+\$\d+$/.test(e[i])?e[i]=e[i].replace(/^[^\$]+/,"{pid}"):t(e[i])}(t.state.inputs),t.state.isChildStudy=!0},u.getStudyIdWithLatestVersion=function(t){const e=u.cutDollarHash(t.id);let i=e;return e.indexOf("@tv-scripting")>=0?i+="-101!":i+="-"+t.version,i},u.prototype.parseValue=function(t,e){return"bool"===t?TradingView.parseBool(e):e},u.prototype.defaultInputs=function(){for(var t=[],e=0;e<this.inputs.length;e++)t.push(this.inputs[e].defval);return t},u.prototype.state=function(t){var e={};for(var i in this)this.hasOwnProperty(i)&&(e[i]=this[i],!0!==t&&"id"===i&&(e[i]+="-"+this.version));return e},u.prototype.symbolInputId=function(){var t=this.inputs.filter((function(t){return"symbol"===t.type}));return t.length>0?t[0].id:null},u.prototype.createDefaults=function(){if(this.defaults){var t=TradingView.clone(this.defaults);t.precision="default";var e=u.getStudyPropertyRootName(this);defaults.create(e,t)}},u.prototype.removeDefaults=function(){defaults.remove(u.getStudyPropertyRootName(this))},u.findStudyMetaInfoByDescription=function(t,e){if(t){for(var i=0;i<t.length;++i)if(t[i].description.toLowerCase()===e.toLowerCase())return t[i];throw new Error("unexpected study id:"+e)}throw new Error("There is no studies metainfo")},u.isParentSourceId=function(t){return"string"==typeof t&&/^[^\$]+\$\d+$/.test(t)},u.isSourceInput=function(t){return t.id&&(("source"===t.id||"src"===t.id)&&("text"===t.type||"source"===t.type)||"source"===t.type)},u.getChildSourceInputTitles=function(t,e,i){var r={};if(e.plots&&e.plots.length&&t.options&&t.options.length)for(var n,o,s,a=0;a<t.options.length;++a)o=(n=t.options[a])&&+n.split("$")[1],(s=isFinite(o)&&e.plots[o])&&~u.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(s.type)&&(r[n]=e.styles&&e.styles[s.id]&&e.styles[s.id].title||s.id,i&&(r[n]=i+": "+r[n]));return r};var l=new Map([["AnchoredVWAP@tv-basicstudies","linetoolanchoredvwap"],["RegressionTrend@tv-basicstudies","linetoolregressiontrend"]]);u.getStudyPropertyRootName=function(t){var e=l.get(t.id);if(void 0!==e)return e;var i="study_"+t.id;return t.pine&&t.pine.version&&(i+="_"+t.pine.version.replace(".","_")),i},u.getStudyPropertyRootNameById=function(t){var e=l.get(t);return void 0!==e?e:"study_"+t},u.overrideDefaults=function(t){0!==t.length&&o(a,t,(function(t){return TradingView.defaultProperties[u.getStudyPropertyRootName(t)]||null}))},u.mergeDefaultsOverrides=function(t){TradingView.merge(a,t)},u.isScriptStrategy=function(t){if(t.extra&&t.extra.kind)return t.extra.kind===s.Strategy;if(!0===t.isTVScriptStrategy)return!0;var e=t.TVScriptSourceCode||t.scriptSource;return!!e&&TVScript.isStrategy(e)},u.getOrderedInputIds=function(t){for(var e=[],i=t.inputs,r=0;r<i.length;++r){var n=i[r];e.push(n.id)}return e},
u.canBeChild=function(t){if(t&&"string"==typeof t)return!0;if(!t||t.extra&&!u.isAllowedSourceInputsCount(t.extra.sourceInputsCount)||!0===t.canNotBeChild||!1===t.canBeChild||~u.CHILD_STUDY_EXCLUDE_IDS.indexOf(t.id))return!1;for(var e=t.inputs,i=0,r=0;r<e.length;++r)u.isSourceInput(e[r])&&++i;return u.isAllowedSourceInputsCount(i)},u.isAllowedSourceInputsCount=function(t){return 1===t},u.canHaveChildren=function(t){if(t){if(t.isTVScriptStrategy||t.TVScriptSourceCode&&TVScript.isStrategy(t.TVScriptSourceCode))return!1;if(t.id&&!~u.CHILD_STUDY_PARENT_EXCLUDE_IDS.indexOf(t.id)&&Array.isArray(t.plots))for(var e=0;e<t.plots.length;++e)if(~u.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(t.plots[e].type))return!0}return!1},TradingView.StudyMetaInfo=u,t&&t.exports&&(t.exports=u)},270369:(t,e,i)=>{var r;i.d(e,{DataSourceDangerReason:()=>r}),function(t){t.Spread="spread",t.PineRepainting="pine-repainting",t.CryptoCap="cryptocap"}(r||(r={}))},386189:(t,e,i)=>{var r=i(787236).t,n=i(496396).isStudyStateForAlertType,o=i(418458),s=i(902105).generateTitleForGui,a=i(911905).getLogger("Alerts.Band"),u=i(749473),l=i(143498);TradingView="object"==typeof i.g?i.g.TradingView:TradingView||{};var d={create:function(t){var e,i=t||{},r=i.type;if("MainSeries"===r)e=c;else if(n(r,!0))e=f;else if("Value"===r)e=y;else{if(!/^LineTool.*/i.test(r))return a.logError("Unknown alert band type "+r),null;e=g}return new e(i)}};function p(t){this._band=t||{}}function c(){p.apply(this,arguments)}function f(){p.apply(this,arguments)}function y(){p.apply(this,arguments)}function g(){p.apply(this,arguments)}p.prototype.id=function(){return this._band.id},p.prototype.type=function(){return this._band.type},p.prototype.title=function(){return this._band.title},p.prototype.hasPlots=function(){return this._band.plots&&this._band.plots.length},p.prototype.getActualSymbol=function(){return this._band.actualSymbol},p.prototype.getSymbolString=function(){return this._band.symbolString},p.prototype.getPlotTitle=function(t){return t.title?t.title:o.isOhlcOpenPlot(t)?t.ohlcTitle+" "+r("Open"):o.isOhlcHighPlot(t)?t.ohlcTitle+" "+r("High"):o.isOhlcLowPlot(t)?t.ohlcTitle+" "+r("Low"):o.isOhlcClosePlot(t)?t.ohlcTitle+" "+r("Close"):"vol"===t.id?r("Volume"):"vol_ma"===t.id?r("Volume MA"):"open"===t.id?r("Open"):"high"===t.id?r("High"):"low"===t.id?r("Low"):"close"===t.id?r("Close"):t.id},p.prototype.getPlots=function(t){var e=t||{};if(!this._band.plots||!this._band.plots.length)return this._band.plots;if("inputSelect"===e.format){var i=-1;return this._band.plots.map((function(t){return{value:++i,title:this.getPlotTitle(t)}}),this)}return this._band.plots},p.prototype.hasUsualPlots=function(){var t=this._band.plots;return!t||t.filter(o.isAlertConditionPlot).length<t.length},p.prototype.getInputs=function(){return{}},inherit(c,p),c.prototype.title=function(t){var e=i(166437),r=t||{},n=!!r.withInterval,o=this._band.actualSymbol;return e&&(o=e.shortName(o)),s({symbol:o,interval:n?this._band.interval:null,style:this._band.style,inputs:this._band.styleInputs||{},boxSize:this._band.boxSize,
reversalAmount:this._band.reversalAmount,sessionDescription:r.sessionDescription})},c.prototype.getInterval=function(){return this._band.interval},c.prototype.getStyle=function(){return this._band.style},c.prototype.getStyleInputs=function(){return this._band.styleInputs},c.prototype.isRangeBasedStyle=function(){return u.isRangeBasedStyle(this._band.style)},c.prototype.isSpread=function(){return this._band.isSpread},c.prototype.sessionId=function(){return this._band.sessionId},c.prototype.sessionDescription=function(){return this._band.sessionDescription},c.prototype.getDividendsAdjustment=function(){return this._band.dividendsAdjustment},c.prototype.getBackAdjustment=function(){return this._band.backAdjustment},c.prototype.getSettlementAsClose=function(){return this._band.settlementAsClose},inherit(f,p),f.prototype.title=function(t){var e,i,n,o=t||{},s=o.withPlotTitle,a=this._band;return o.short&&a.shortTitle?e=a.shortTitle:a.title?e=a.title:(e=a.shortDescription||"Study",i=[],Object.keys(a.inputs).forEach((function(t){var e=a.inputs[t]&&a.inputs[t].id;e&&!a.inputs[t].isHidden&&void 0!==a.inputs[e]&&i.push(a.inputs[e])})),i.length&&(e+=" ("+i.join(", ")+")")),s&&(n=this.selectedPlot())&&(e+=" "+(n.title||r("Untitled Plot"))),l.isRtl()&&(e=l.forceLTRStr(e)),e},f.prototype.selectedPlot=function(){var t=this._band;return void 0===t.plotIndex?null:this.getPlots().filter((function(e){return e.value===t.plotIndex}))[0]||null},f.prototype.getInputs=function(){return this._band.inputs||{}},f.prototype.isTVLibrary=function(){return this._band.isTVLibrary||!1},inherit(y,p),y.prototype.title=function(t){var e=this._band.value||0;return t.formatter?t.formatter.format(parseFloat(e)):parseFloat(e).toString()},inherit(g,p),t.exports.AlertBandAbstract=p,t.exports.AlertBandValue=y,t.exports.AlertBandStudy=f,t.exports.alertBandFactory=d},496396:(t,e,i)=>{var r;function n(t,e){let i="Study"===t||t===r.StudyLineTool||/^study_\w+/.test(t);return e&&(i=i||"StudyStrategy"===t),i}i.r(e),i.d(e,{StateForAlertType:()=>r,isStudyStateForAlertType:()=>n}),function(t){t.StudyLineTool="StudyLineTool"}(r||(r={}))},290557:(t,e,i)=>{function r(t){let e,i=0;if(0===t.length)return i;for(var r=0;r<t.length;r++)e=t.charCodeAt(r),i=(i<<5)-i+e,i&=i;return i}i.r(e),i.d(e,{hash:()=>r})},971417:(t,e,i)=>{function r(t){return t===n(t)}function n(t){const e=t.indexOf("$"),i=t.indexOf("@");return e<0&&i>=0?null:t.substring(Math.max(e+1,0),i>=0?i:t.length)}function o(t){return t.startsWith("PUB;")}function s(t){return t.startsWith("USER;")}function a(t){return t.startsWith("STD;")}function u(t){return t.includes("Candlestick%1Pattern%1")}function l(t){return t.startsWith("EDGR_")}i.d(e,{isPineIdString:()=>r,extractPineId:()=>n,isPublishedPineId:()=>o,isCustomPineId:()=>s,isStandardPineId:()=>a,isCandleStickId:()=>u,isEdgrPineId:()=>l})}}]);