(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[61834],{661118:(e,t)=>{"use strict";t.CircularBuffer=void 0;var r=function(){function e(e){this._start=0,this._size=0,this._buffer=new Array(e)}return e.prototype.size=function(){return this._size},e.prototype.capacity=function(){return this._buffer.length},e.prototype.enqueue=function(e){this._size<this._buffer.length?this._size++:this._start=(this._start+1)%this._buffer.length;var t=(this._start+this._size-1)%this._buffer.length;this._buffer[t]=e},e.prototype.dequeue=function(){if(0===this._size)throw new Error("Buffer is empty");var e=this._buffer[this._start];return this._buffer[this._start]=void 0,this._start=(this._start+1)%this._buffer.length,this._size--,e},e.prototype.get=function(e){if(e>=this._size)throw new Error("Index is out of range");var t=(this._start+e)%this._buffer.length;return this._buffer[t]},e.prototype.forEach=function(e,t){for(var r=0;r<this._size;r++){var i=(this._start+r)%this._buffer.length;e.call(t,this._buffer[i],i,this)}},e.prototype.clear=function(){for(var e=this._buffer.length,t=0;t<e;t++)this._buffer[t]=void 0;this._start=0,this._size=0},e}();t.CircularBuffer=r},833713:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var i=r(407193);const n=function(e){return(null==e?0:e.length)?(0,i.default)(e,1):[]}},316230:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var i=r(517487);const n=function(e,t){return(0,i.default)(e,t)}},277973:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});const i=function(e){return null===e}},203308:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var i=r(128177),n=r(383527);const s=function(e){return"number"==typeof e||(0,n.default)(e)&&"[object Number]"==(0,i.default)(e)}},410864:(e,t,r)=>{"use strict";var i;r.d(t,{ToastIntent:()=>i}),function(e){e.Default="default",e.Success="success",e.Warning="warning",e.Danger="danger"}(i||(i={}))},500521:(e,t,r)=>{"use strict";e.exports.pushChartPage=async function(e){const{default:t}=await Promise.all([r.e(80509),r.e(66708),r.e(31205),r.e(16061),r.e(84575),r.e(23450),r.e(38119),r.e(59420),r.e(41915),r.e(34629)]).then(r.t.bind(r,55244,23)),i=new t.ChartPage(e);TradingView.historyManager.push(i)}},210542:(e,t,r)=>{"use strict";r.r(t),r.d(t,{lineToolEntityInfo:()=>a,studyEntityInfo:()=>o,seriesEntityInfo:()=>l,entityForDataSource:()=>c});var i=r(746305),n=r(741511),s=r(540968);function a(e){return{id:e.id(),name:(t=e.toolname,Object.keys(n.supportedLineTools).find(e=>n.supportedLineTools[e].name===t)||null)};var t}function o(e){return{id:e.id(),name:e.metaInfo().description}}function l(e){return{id:e.id(),name:"Main Series"}}function c(e,t){return t===e.mainSeries()?l(e.mainSeries()):(0,i.isStudy)(t)?o(t):(0,s.isLineTool)(t)?a(t):null}},178323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{isLineToolRiskReward:()=>o,LineDataSourceApi:()=>c});var i=r(588537),n=r(270617);const s=new Map([["LineToolRiskRewardLong",2],["LineToolRiskRewardShort",2],["LineToolBezierQuadro",3],["LineToolBezierCubic",4]]);function a(e){const t=s.get(e.toolname);if(void 0!==t)return t
;const r=e.pointsCount();return-1===r?e.points().length:r}function o(e){return"LineToolRiskRewardLong"===e||"LineToolRiskRewardShort"===e}const l=["alwaysShowStats","entryPrice","inputs.first bar time","inputs.last bar time","interval","linesWidths","points","snapTo45Degrees","stopPrice","symbol","symbolStateVersion","currencyId","unitId","targetPrice","zOrderVersion"];class c{constructor(e,t,r){this._source=e,this._undoModel=t,this._model=t.model(),this._pointsConverter=r}isSelectionEnabled(){return this._source.isSelectionEnabled()}setSelectionEnabled(e){this._source.setSelectionEnabled(e)}isSavingEnabled(){return this._source.isSavedInChart()}setSavingEnabled(e){this._source.setSavingInChartEnabled(e)}isShowInObjectsTreeEnabled(){return this._source.showInObjectTree()}setShowInObjectsTreeEnabled(e){this._source.setShowInObjectsTreeEnabled(e)}isUserEditEnabled(){return this._source.userEditEnabled()}setUserEditEnabled(e){this._source.setUserEditEnabled(e)}bringToFront(){this._model.bringToFront([this._source])}sendToBack(){this._model.sendToBack([this._source])}getProperties(){return this._source.properties().state(l,!0)}setProperties(e){this._setProps(this._source.properties(),e,"")}getPoints(){let e=this._source.points();const t=a(this._source);return e.length>t&&((0,i.assert)(o(this._source.toolname)),e=e.slice(0,t)),this._pointsConverter.dataSourcePointsToPriced(e)}setPoints(e){if(this._source.isFixed())return;const t=a(this._source);if(t!==e.length)throw new Error(`Wrong points count. Required: ${t}, provided: ${e.length}`);const r=this._pointsConverter.apiPointsToDataSource(e);this._model.startChangingLinetool(this._source),this._model.changeLinePoints(this._source,r),this._model.endChangingLinetool(!0),this._source.createServerPoints()}ownerSourceId(){return(0,i.ensureNotNull)(this._source.ownerSource()).id()}changePoint(e,t){if(this._source.isFixed())return;const r=this._pointsConverter.apiPointsToDataSource([e])[0];this._model.startChangingLinetool(this._source,{...r},t),this._model.changeLinePoint({...r}),this._model.endChangingLinetool(!1),this._source.createServerPoints()}isHidden(){return this._source.isSourceHidden()}getRawPoints(){return this._source.points()}setRawPoint(e,t){this._model.startChangingLinetool(this._source,{...t},e),this._model.changeLinePoint({...t}),this._model.endChangingLinetool(!1)}move(e,t){this._model.startMovingSources([this._source],{logical:e},null,new Map),this._model.moveSources({logical:t},new Map),this._model.endMovingSources(!1)}dataAndViewsReady(){return this._source.dataAndViewsReady()}zorder(){return this._source.zorder()}symbol(){return this._source.properties().symbol.value()}currency(){return this._source.properties().currencyId.value()}unit(){return this._source.properties().unitId.value()}share(e){this._undoModel.shareLineTools([this._source],e)}sharingMode(){return this._source.sharingMode().value()}_setProps(e,t,r){for(const i in t){if(!t.hasOwnProperty(i))continue;const s=0===r.length?i:`${r}.${i}`;if(e.hasOwnProperty(i)){const r=t[i];(0,
n.isHashObject)(r)?this._setProps(e[i],r,s):e[i].setValue(r)}else console.warn(`Unknown property "${s}"`)}}}},210493:(e,t,r)=>{"use strict";r.d(t,{PaneApi:()=>u});var i=r(588537),n=r(228039),s=r(210542),a=r(270617),o=r(787236),l=r(277036),c=r(72833);const h=new l.TranslatedString("change pane height",(0,o.t)("change pane height"));class d extends c.UndoCommand{constructor(e,t,r){super(h),this._model=e,this._paneIndex=t,this._paneHeight=r,this._prevStretchFactors=this._model.panes().map(e=>e.stretchFactor())}redo(){this._model.changePanesHeight(this._paneIndex,this._paneHeight)}undo(){const e=this._model.panes();for(let t=0;t<e.length;++t)e[t].setStretchFactor((0,i.ensureDefined)(this._prevStretchFactors[t]));this._model.fullUpdate()}}class u{constructor(e,t){this._priceScales=new WeakMap,this._pane=e,this._chartWidget=t}hasMainSeries(){return this._pane.containsMainSeries()}getLeftPriceScales(){return this._pane.leftPriceScales().map(this._getPriceScaleApi,this)}getRightPriceScales(){return this._pane.rightPriceScales().map(this._getPriceScaleApi,this)}getMainSourcePriceScale(){const e=this._pane.mainDataSource();if(null===e)return null;const t=e.priceScale();return null===t||this._pane.isOverlay(e)?null:this._getPriceScaleApi(t)}setMaximized(e){if(this._pane.maximized().value()!==e)for(const e of this._chartWidget.paneWidgets())if(e.state()===this._pane){this._chartWidget.toggleMaximizePane(e);break}}legendLoaded(){const e=this._chartWidget.paneByState(this._pane);return Boolean(e&&e.statusWidget())}getAllEntities(){const e=this._pane.model();return this._pane.sourcesByGroup().allIncludingHidden().map(t=>(0,s.entityForDataSource)(e,t)).filter(a.notNull).filter(e=>null!==e.name)}getHeight(){return this._pane.height()}setHeight(e){const t=this._chartWidget.model().model(),r=t.panes();(0,i.assert)(r.length>1,"Unable to change pane's height if there is only one pane");const n=r.indexOf(this._pane);(0,i.assert)(-1!==n,"Invalid pane index");const s=new d(t,n,e);this._chartWidget.model().undoHistory().pushUndoCommand(s)}moveTo(e){const t=this.paneIndex();t!==e&&((0,i.assert)(e>=0&&e<this._chartWidget.paneWidgets().length,"Invalid pane index"),this._chartWidget.model().movePane(t,e))}paneIndex(){return this._chartWidget.model().model().panes().indexOf(this._pane)}_getPriceScaleApi(e){let t=this._priceScales.get(e);return void 0===t&&(t=new n.PriceScaleApi(this._chartWidget.model(),e),this._priceScales.set(e,t)),t}}},228039:(e,t,r)=>{"use strict";r.d(t,{PriceScaleApi:()=>i});class i{constructor(e,t){this._chartUndoModel=e,this._chartModel=e.model(),this._priceScale=t}getMode(){const e=this._priceScale.properties().childs();return e.percentage.value()?2:e.indexedTo100.value()?3:e.log.value()?1:0}setMode(e){this._priceScale.setMode({percentage:2===e,log:1===e,indexedTo100:3===e})}isInverted(){return this._priceScale.isInverted()}setInverted(e){this._priceScale.properties().childs().isInverted.setValue(e)}getVisiblePriceRange(){return this._priceScale.priceRangeInPrice()}setVisiblePriceRange(e){
this._priceScale.setPriceRangeInPrice(e),this._chartModel.lightUpdate()}hasMainSeries(){return this._priceScale.hasMainSeries()}getStudies(){return this._priceScale.getStudies().map(e=>e.id())}currency(){const e=this._priceScale.currency(this._chartModel.availableCurrencies());return null===e?null:{selectedCurrency:e.selectedCurrency,readOnly:e.readOnly}}setCurrency(e){this._chartUndoModel.setPriceScaleCurrency(this._priceScale,e)}unit(){const e=this._priceScale.unit(this._chartModel.availableUnits());return null===e?null:{selectedUnit:e.selectedUnit,readOnly:0===e.availableGroups.size,availableGroups:Array.from(e.availableGroups)}}setUnit(e){this._chartUndoModel.setPriceScaleUnit(this._priceScale,e)}}},66066:(e,t,r)=>{"use strict";r.d(t,{ReplayApi:()=>i});class i{constructor(e){this._replayUIController=e}isReplayToolbarVisible(){return this._replayUIController.isReplayModeEnabled()}showReplayToolbar(){return this._replayUIController.enableReplayMode()}hideReplayToolbar(){return this._replayUIController.requestCloseReplay()}}},100148:(e,t,r)=>{"use strict";function i(e,t){const r=e.dataSourceForId(t);if(null===r)throw new Error(`Chart has no study or shape with id "${t}"`);return r}r.d(t,{SelectionApi:()=>n});class n{constructor(e){this._model=e}add(e){Array.isArray(e)?this._model.selectionMacro(t=>{e.map(i.bind(null,this._model)).forEach(e=>t.addSourceToSelection(e))}):this.add([e])}canBeAddedToSelection(e){const t=i(this._model,e);return this._model.selection().canBeAddedToSelection(t)}set(e){Array.isArray(e)?this._model.selectionMacro(t=>{t.clearSelection(),e.map(i.bind(null,this._model)).forEach(e=>t.addSourceToSelection(e))}):this.set([e])}remove(e){Array.isArray(e)?this._model.selectionMacro(t=>{e.map(i.bind(null,this._model)).forEach(e=>t.removeSourceFromSelection(e))}):this.remove([e])}contains(e){const t=i(this._model,e);return this._model.selection().isSelected(t)}allSources(){return this._model.selection().dataSources().map(e=>e.id())}isEmpty(){return this._model.selection().isEmpty()}clear(){this._model.selectionMacro(e=>{e.clearSelection()})}onChanged(){return this._model.onSelectedSourceChanged()}}},125853:(e,t,r)=>{"use strict";r.d(t,{SeriesApi:()=>l});var i=r(588537),n=r(284330),s=r(167977),a=r(38300),o=r(228039);class l{constructor(e,t){this._series=e,this._undoModel=t,this._model=t.model()}isUserEditEnabled(){return this._series.userEditEnabled()}setUserEditEnabled(e){this._series.setUserEditEnabled(e)}mergeUp(){this._model.isMergeUpAvailableForSource(this._series)&&new n.MergeUpUndoCommand(this._model,this._series,null).redo()}mergeDown(){this._model.isMergeDownAvailableForSource(this._series)&&new n.MergeDownUndoCommand(this._model,this._series,null).redo()}unmergeUp(){this._model.isUnmergeAvailableForSource(this._series)&&new s.UnmergeUpUndoCommand(this._model,this._series,null).redo()}unmergeDown(){this._model.isUnmergeAvailableForSource(this._series)&&new s.UnmergeDownUndoCommand(this._model,this._series,null).redo()}detachToRight(){
new a.MoveToNewPriceScaleUndoCommand(this._model,this._series,this._pane(),"right",null).redo()}detachToLeft(){new a.MoveToNewPriceScaleUndoCommand(this._model,this._series,this._pane(),"left",null).redo()}detachNoScale(){new a.MoveToNewPriceScaleUndoCommand(this._model,this._series,this._pane(),"overlay",null).redo()}changePriceScale(e){const t=(0,i.ensureNotNull)(this._model.paneForSource(this._series));switch(e){case"new-left":new a.MoveToNewPriceScaleUndoCommand(this._model,this._series,t,"left",null).redo();break;case"new-right":new a.MoveToNewPriceScaleUndoCommand(this._model,this._series,t,"right",null).redo();break;case"no-scale":(0,i.assert)(t.actionNoScaleIsEnabled(this._series),"Unable to leave a pane without any non-overlay price scale"),new a.MoveToNewPriceScaleUndoCommand(this._model,this._series,t,"overlay",null).redo();break;default:const r=this._model.dataSourceForId(e);if(null===r)throw new Error(`There is no study with entityId='${e}'`);const n=this._model.paneForSource(r)===t;(0,i.assert)(n,"Study should be on the main pane");const s=(0,i.ensureNotNull)(r.priceScale());new a.MoveToExistingPriceScaleUndoCommand(this._model,this._series,t,s,null).redo()}}isVisible(){return this._series.properties().childs().visible.value()}setVisible(e){this._series.properties().childs().visible.setValue(e)}bringToFront(){this._model.bringToFront([this._series])}sendToBack(){this._model.sendToBack([this._series])}entityId(){return this._series.id()}chartStyleProperties(e){return this._series.properties().childs()[c(e)].state(["inputs","inputsInfo"])}setChartStyleProperties(e,t){this._series.properties().childs()[c(e)].mergeAndFire(t)}barsCount(){return this._series.bars().size()}symbolSource(){return{symbol:this._series.symbol(),currencyId:this._series.currency(),unitId:this._series.unit()}}isLoading(){return this._series.isLoading()}data(){return this._series.data()}priceScale(){return new o.PriceScaleApi(this._undoModel,this._series.priceScale())}_pane(){return(0,i.ensureNotNull)(this._model.paneForSource(this._series))}}function c(e){switch(e){case 0:return"barStyle";case 1:return"candleStyle";case 2:return"lineStyle";case 3:return"areaStyle";case 4:return"renkoStyle";case 5:return"kagiStyle";case 6:return"pnfStyle";case 7:return"pbStyle";case 8:return"haStyle";case 9:return"hollowCandleStyle";case 10:return"baselineStyle";case 11:return"rangeStyle";case 12:return"hiloStyle";default:(0,i.ensureNever)(e)}throw new Error("unsupported chart style: "+e)}},830384:(e,t,r)=>{"use strict";r.d(t,{StudyApi:()=>b});var i=r(588537),n=r(97639),s=r.n(n),a=r(270617),o=r(594930),l=r(999998),c=r(795896),h=r(167977),d=r(284330),u=r(38300),g=r(500099),m=r(705318),p=r(160377),_=r(228039),f=r(906096),v=r(591316);class b{constructor(e,t){this._onStudyCompleted=new(s()),this._onStudyError=new(s()),this._study=e,this._chartWidget=t,this._undoModel=this._chartWidget.model(),this._model=this._undoModel.model(),this._study.onAboutToBeDestroyed().subscribe(this,()=>{this._study.onStatusChanged().unsubscribeAll(this),
this._study.onAboutToBeDestroyed().unsubscribeAll(this)}),this._study.onStatusChanged().subscribe(this,e=>{switch(e.type){case f.StudyStatusType.Completed:this._onStudyCompleted.fire();break;case f.StudyStatusType.Error:this._onStudyError.fire()}})}isUserEditEnabled(){return this._study.userEditEnabled()}setUserEditEnabled(e){this._study.setUserEditEnabled(e)}getInputsInfo(){return(0,v.getStudyInputsInfo)(this._study.metaInfo())}getInputValues(){const e=this._study.inputs({symbolsForChartApi:!1,asObject:!0});return Object.keys(e).map(t=>{const r=e[t];return{id:t,value:(0,a.isObject)(r)?r.v:r}})}setInputValues(e){const t=this.getInputValues();for(const r of e){void 0!==t.find(e=>e.id===r.id)?this._study.properties().inputs[r.id].setValue(r.value):console.warn(`There is no such input: "${r.id}"`)}}mergeUp(){this._model.isMergeUpAvailableForSource(this._study)&&new d.MergeUpUndoCommand(this._model,this._study,null).redo()}mergeDown(){this._model.isMergeDownAvailableForSource(this._study)&&new d.MergeDownUndoCommand(this._model,this._study,null).redo()}unmergeUp(){this._model.isUnmergeAvailableForSource(this._study)&&new h.UnmergeUpUndoCommand(this._model,this._study,null).redo()}unmergeDown(){this._model.isUnmergeAvailableForSource(this._study)&&new h.UnmergeDownUndoCommand(this._model,this._study,null).redo()}onDataLoaded(){return this._onStudyCompleted}onStudyError(){return this._onStudyError}mergeUpWithUndo(){this._model.isMergeUpAvailableForSource(this._study)&&this._undoModel.mergeSourceUp(this._study)}mergeDownWithUndo(){this._model.isMergeDownAvailableForSource(this._study)&&this._undoModel.mergeSourceDown(this._study)}unmergeUpWithUndo(){this._model.isUnmergeAvailableForSource(this._study)&&this._undoModel.unmergeSourceUp(this._study)}unmergeDownWithUndo(){this._model.isUnmergeAvailableForSource(this._study)&&this._undoModel.unmergeSourceDown(this._study)}priceScale(){return new _.PriceScaleApi(this._undoModel,(0,i.ensureNotNull)(this._study.priceScale()))}symbolSource(){const e=(0,i.ensureNotNull)(this._study.symbolSource());return{symbol:e.symbol(),currencyId:e.currency(),unitId:e.unit()}}changePriceScale(e){const t=(0,i.ensureNotNull)(this._model.paneForSource(this._model.mainSeries())),r=(0,i.ensureNotNull)(this._model.paneForSource(this._study));switch(e){case"no-scale":(0,i.assert)(r.actionNoScaleIsEnabled(this._study),"Unable to leave a pane without any non-overlay price scale"),new u.MoveToNewPriceScaleUndoCommand(this._model,this._study,r,"overlay",null).redo();break;case"as-series":(0,i.assert)(r===t,"Study should be on the main pane"),new u.MoveToExistingPriceScaleUndoCommand(this._model,this._study,r,this._model.mainSeries().priceScale(),null).redo();break;case"new-left":new u.MoveToNewPriceScaleUndoCommand(this._model,this._study,r,"left",null).redo();break;case"new-right":new u.MoveToNewPriceScaleUndoCommand(this._model,this._study,r,"right",null).redo();break;default:const n=this._model.dataSourceForId(e);if(null===n)throw new Error(`There is no study with entityId='${e}'`)
;const s=r===this._model.paneForSource(n);(0,i.assert)(s,"Both studies should be on the same pane");const a=(0,i.ensureNotNull)(n.priceScale()),o=(0,c.sourceNewCurrencyOnPinningToPriceScale)(this._study,a,this._model),h=(0,m.sourceNewUnitOnPinningToPriceScale)(this._study,a,this._model);new u.MoveToExistingPriceScaleUndoCommand(this._model,this._study,r,a,null).redo(),null!==o&&new l.SetPriceScaleCurrencyUndoCommand(a,o,this._undoModel.chartWidget(),null).redo(),null!==h&&new p.SetPriceScaleUnitUndoCommand(a,h,this._undoModel.chartWidget(),null).redo()}}isVisible(){return this._study.properties().visible.value()}setVisible(e){this._study.properties().visible.setValue(e)}bringToFront(){this._model.bringToFront([this._study])}sendToBack(){this._model.sendToBack([this._study])}applyOverrides(e){(0,o.applyOverridesToStudy)(this._study,e)}dataLength(){return this._study.status().type!==f.StudyStatusType.Completed?0:this._study.metaInfo().plots.length>0?this._study.data().size():this._model.mainSeries().bars().size()}isLoading(){return this._study.isLoading()}async applyToEntireLayout(){const e=new g.ActionsProvider(this._chartWidget),t=(await e.contextMenuActionsForSources([this._study])).find(e=>"applyStudyToEntireLayout"===e.id);t&&t.execute()}}},591316:(e,t,r)=>{"use strict";r.d(t,{getStudyInputsInfo:()=>n});var i=r(787236);function n(e){return void 0===e.inputs?[]:e.inputs.map(e=>({...e,id:e.id,localizedName:void 0!==e.name?(0,i.t)(e.name,{context:"input"}):""}))}},530980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getCharts:()=>g,getChartsCount:()=>m,getDrawingTemplates:()=>D,getGlobalNotifications:()=>u,getStandardStudyTemplateContentById:()=>I,getStudyTemplateContent:()=>w,getStudyTemplateContentById:()=>T,getStudyTemplatesList:()=>b,invalidateStudyTemplatesList:()=>S,loadChart:()=>p,loadDrawingTemplate:()=>E,removeChart:()=>f,removeDrawingTemplate:()=>M,removeStudyTemplate:()=>C,removeStudyTemplateById:()=>A,renameStudyTemplate:()=>W,replaceStudyTemplate:()=>P,saveChart:()=>_,saveDrawingTemplate:()=>L,saveStudyTemplate:()=>y});r(823127);var i=r(656130),n=r(87772);const s=(0,r(911905).getLogger)("Lib.AsyncGzip"),a=[];var o=r(86674);function l(e){if(e.ok)return e.json();throw new Error("not ok")}function c(e){if(e.ok)return e.json();throw new Error("not ok")}var h=r(314802),d=r(823127);function u(e,t){const r={count:t};return e&&(r.lastId=e),d.ajax({url:"/global-notifications/",cache:!1,dataType:"json",type:"GET",data:r})}function g(e){return new Promise((t,r)=>{d.getJSON("/my-charts/",{limit:e},t).fail(r)})}function m(e,t){d.getJSON("/api/v1/charts/count/",void 0,e).fail(t)}function p(e){const t=(0,i.generateChartUrl)({chartId:e.url}),r=document.createElement("a");r.href=t,!(0,h.isOnMobileAppPage)("new")&&/^\/chart(\/|$)/.test(location.pathname)&&(r.target="_blank",r.rel="noopener"),r.click()}function _(e,t,i,o,l){return function(e){let t;const i=new Promise((i,s)=>{let o=setTimeout(s,5e3,new Error("Loading timed out"));t=a.pop()||new n.Worker(new URL(r.p+r.u(31482),r.b),{name:"Async gzip worker"}),t.onerror=s,
t.onmessageerror=s,t.onmessage=e=>{clearTimeout(o),"done"===e.data.type?i(e.data.payload):o=setTimeout(s,3e4,new Error("Processing timed out"))},t.postMessage({type:"do",payload:e})});return i.then(()=>{a.length<1?(delete t.onerror,delete t.onmessage,delete t.onmessageerror,a.push(t)):t.terminate()},e=>{s.logError("Worker request failed: "+e.message),t.terminate()}),i}(o.content).catch(()=>null).then(e=>{const t=new FormData;for(const r in o)"content"===r&&e?t.append(r,new Blob([e],{type:"application/gzip"}),"blob.gz"):t.append(r,String(o[r]));return fetch("/savechart/",{method:"POST",credentials:"same-origin",body:t})}).then(e=>{if(!e.ok)throw e;return e.text()})}function f(e){return new Promise((t,r)=>{d.post("/deletechart/",{uid:[e]},e=>{e.error?r(e.error):t()})})}let v=null;function b(){return null===v&&(v=(0,o.fetch)("/api/v1/study-templates",{credentials:"same-origin"}).then(l).then(e=>{const t=new Set((e.standard||[]).map(e=>e.name)),r=(e.custom||[]).map(e=>({...e,is_default:!1}));for(const e of r)t.delete(e.name);const i=(e.standard||[]).filter(e=>t.has(e.name)).map(e=>({...e,is_default:!0}));return[...r,...i]})),v}function S(){v=null}function y(e){return t={name:e.name,content:e.content,meta_info:e.meta_info||{indicators:[]}},(0,o.fetch)("/api/v1/study-templates",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{if(e.ok)return e.json().then(e=>({result:e}));switch(e.status){case 403:return e.json().then(e=>({error:e.code}));case 422:return e.json().then(e=>({error:e.code,id:e.id}));default:throw new Error("not ok")}});var t}async function w(e){throw new Error("Not implemented")}async function C(e){throw new Error("Not implemented")}function T(e,t){(function(e){return(0,o.fetch)("/api/v1/study-templates/"+e,{credentials:"same-origin"}).then(l)})(e).then(t)}function I(e,t){(function(e){return(0,o.fetch)("/api/v1/study-templates/standard/"+e,{credentials:"same-origin"}).then(l)})(e).then(t)}function A(e,t){(function(e){return(0,o.fetch)("/api/v1/study-templates/"+e,{credentials:"same-origin",method:"DELETE"}).then(e=>{if(!e.ok)throw new Error("not ok")})})(e).then(t)}function W(e,t,r){(function(e,t){return(0,o.fetch)(`/api/v1/study-templates/${e}/rename/`,{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(l)})(e,{name:t}).then(r)}function P(e,t,r){(function(e,t){return(0,o.fetch)("/api/v1/study-templates/"+e,{credentials:"same-origin",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(l)})(e,{name:t.name,content:t.content,meta_info:t.meta_info||{indicators:[]}}).then(r)}function D(e){return function(e){return(0,o.fetch)(`/drawing-templates/${e}/`,{credentials:"same-origin"}).then(c)}(e)}function L(e,t,r){return function(e,t,r){const i=new FormData;return i.append("name",t),i.append("tool",e),i.append("content",r),(0,o.fetch)("/save-drawing-template/",{method:"POST",credentials:"same-origin",body:i}).then(c)}(e,t,r)}function E(e,t){
return async function(e,t){const r=await(0,o.fetch)(`/drawing-template/${e}/?templateName=${encodeURIComponent(t)}`,{credentials:"same-origin"}),i=await c(r);return JSON.parse(i.content)}(e,t)}function M(e,t){return function(e,t){const r=new FormData;return r.append("name",t),r.append("tool",e),(0,o.fetch)("/remove-drawing-template/",{method:"POST",credentials:"same-origin",body:r}).then(c)}(e,t)}},602466:(e,t,r)=>{"use strict";r.d(t,{backend:()=>i});const i=r(530980)},263983:(e,t,r)=>{"use strict";r.d(t,{INTERVALS:()=>n});var i=r(787236);const n=[{name:"",label:(0,i.t)("minutes",{context:"interval"})},{name:"H",label:(0,i.t)("hours",{context:"interval"})},{name:"D",label:(0,i.t)("days",{context:"interval"})},{name:"W",label:(0,i.t)("weeks",{context:"interval"})},{name:"M",label:(0,i.t)("months",{context:"interval"})}];n.push({name:"R",label:(0,i.t)("range",{context:"interval"})})},901285:(e,t,r)=>{"use strict";r.r(t),r.d(t,{openMobileChartPickerCommand:()=>i,closeMobileChartPickerCommand:()=>n});const i="OPEN_MOBILE_CHART_PICKER_COMMAND",n="CLOSE_MOBILE_CHART_PICKER_COMMAND"},767824:(e,t,r)=>{"use strict";r.d(t,{CustomIntervalsService:()=>d,customIntervalsServiceInstance:()=>u});var i=r(62802),n=r(226722),s=r(405117),a=r(833813),o=r(552279),l=r(713917),c=r(364019),h=r(977809);class d extends l.AbstractJsonStoreService{constructor(e,t,r=[]){super(e,t,"CUSTOM_INTERVALS_CHANGED","IntervalWidget.intervals",r)}set(e,t){(0,s.trackGoProFeature)("customIntervals"),e.length<this.get().length?super.set(e,t):(0,o.runOrGoPro)(()=>super.set(e,t),a.ProductFeatures.CUSTOM_INTERVALS,{feature:"customIntervals"})}_serialize(e){return(0,h.uniq)(e.map(c.normalizeIntervalString))}_deserialize(e){return(0,h.uniq)((0,c.convertResolutionsFromSettings)(e).filter(c.isResolutionMultiplierValid).map(c.normalizeIntervalString))}}const u=new d(n.TVXWindowEvents,i)},84123:(e,t,r)=>{"use strict";r.d(t,{IntervalsService:()=>c});var i=r(583912),n=r(97639),s=r.n(n),a=r(767824),o=r(263983),l=r(364019);class c{constructor(e){this._customIntervalsService=a.customIntervalsServiceInstance,this._supportedIntervalsMayChange=new(s()),this._fireSupportedIntervalsMayChange=()=>{this._supportedIntervalsMayChange.fire()},this._chartApiInstance=e,i.linking.supportedResolutions.subscribe(this._fireSupportedIntervalsMayChange),i.linking.range.subscribe(this._fireSupportedIntervalsMayChange),i.linking.seconds.subscribe(this._fireSupportedIntervalsMayChange),i.linking.ticks.subscribe(this._fireSupportedIntervalsMayChange),i.linking.intraday.subscribe(this._fireSupportedIntervalsMayChange)}destroy(){i.linking.supportedResolutions.unsubscribe(this._fireSupportedIntervalsMayChange),i.linking.range.unsubscribe(this._fireSupportedIntervalsMayChange),i.linking.seconds.unsubscribe(this._fireSupportedIntervalsMayChange),i.linking.ticks.unsubscribe(this._fireSupportedIntervalsMayChange),i.linking.intraday.unsubscribe(this._fireSupportedIntervalsMayChange)}getDefaultIntervals(){
return null===this._chartApiInstance?[]:this._chartApiInstance.defaultResolutions().map(l.normalizeIntervalString)}getCustomIntervals(){return this._customIntervalsService.get()}add(e,t,r){if(!window.user.is_pro&&r)return r(),null;if(!this.isValidInterval(e,t))return null;const i=(0,l.normalizeIntervalString)(`${e}${t}`),n=this.getCustomIntervals();return this._isIntervalDefault(i)||n.includes(i)?null:(this._customIntervalsService.set((0,l.sortResolutions)([...n,i])),i)}remove(e){this._customIntervalsService.set(this.getCustomIntervals().filter(t=>t!==e))}isValidInterval(e,t){return(0,l.isResolutionMultiplierValid)(`${e}${t}`)}isSupportedInterval(e){return(0,l.isAvailable)(e)}supportedIntervalsMayChange(){return this._supportedIntervalsMayChange}getOnChange(){return this._customIntervalsService.getOnChange()}getPossibleIntervals(){return o.INTERVALS}getResolutionUtils(){return{getMaxResolutionValue:l.getMaxResolutionValue,getTranslatedResolutionModel:l.getTranslatedResolutionModel,mergeResolutions:l.mergeResolutions,sortResolutions:l.sortResolutions}}_isIntervalDefault(e){return this.getDefaultIntervals().includes(e)}}},226269:(e,t,r)=>{"use strict";r.d(t,{RangeBinding:()=>o});var i=r(97639),n=r.n(i),s=r(611688),a=r(195048);class o{constructor(e){this._state={ranges:[]},this._change=new(n()),this._rangeChangedListenerBound=this._onRangeChanged.bind(this);const{chartWidget:t}=this._context=e;t.withModel(null,()=>{const e=t.model(),r=e.mainSeries();r.onStatusChanged().subscribe(this,this._updateAvailableRanges),s.enabled("update_timeframes_set_on_symbol_resolve")&&r.dataEvents().symbolResolved().subscribe(this,this._updateAvailableRanges),r.priceScale().properties().childs().lockScale.subscribe(this,this._updateAvailableRanges);const i=e.model().appliedTimeFrame();i.subscribe(this._rangeChangedListenerBound),this._rangeChangedListenerBound(i.value()),this._updateAvailableRanges()})}state(){return this._state}onChange(){return this._change}selectRange(e){this._setState({activeRange:e.value.value});const{chartWidgetCollection:t}=this._context,r={val:e.value,res:e.targetResolution};t.setTimeFrame(r)}destroy(){const{chartWidget:e}=this._context;e.withModel(null,()=>{const t=e.model(),r=t.mainSeries();r.onStatusChanged().unsubscribe(this,this._updateAvailableRanges),s.enabled("update_timeframes_set_on_symbol_resolve")&&r.dataEvents().symbolResolved().unsubscribe(this,this._updateAvailableRanges),r.priceScale().properties().childs().lockScale.unsubscribe(this,this._updateAvailableRanges),t.model().appliedTimeFrame().unsubscribe(this._rangeChangedListenerBound)}),this._change.destroy()}_setState(e){this._state=Object.assign({},this._state,e),this._change.fire(this._state)}_onRangeChanged(e){let t;null!==e&&"period-back"===e.val.type&&(t=e.val.value),this._setState({activeRange:t})}_updateAvailableRanges(){const{availableTimeFrames:e,chartWidget:t}=this._context;if(!t.hasModel())return;const r=t.model().mainSeries(),i=r.status();if(i===a.STATUS_LOADING||i===a.STATUS_RESOLVING)return;const n=e(r.symbolInfo(),r.status())
;0!==n.length&&this._setState({ranges:n})}}},741511:(e,t,r)=>{"use strict";r.r(t),r.d(t,{supportedLineTools:()=>i});const i={cursor:{name:"cursor",onlySelectable:!0},dot:{name:"dot",onlySelectable:!0},arrow_cursor:{name:"arrow",onlySelectable:!0},eraser:{name:"eraser",onlySelectable:!0},measure:{name:"measure",onlySelectable:!0},zoom:{name:"zoom",onlySelectable:!0},brush:{name:"LineToolBrush"},highlighter:{name:"LineToolHighlighter"},text:{name:"LineToolText"},anchored_text:{name:"LineToolTextAbsolute"},note:{name:"LineToolNote"},anchored_note:{name:"LineToolNoteAbsolute"},signpost:{name:"LineToolSignpost"},callout:{name:"LineToolCallout"},balloon:{name:"LineToolBalloon"},arrow_up:{name:"LineToolArrowMarkUp"},arrow_down:{name:"LineToolArrowMarkDown"},arrow_left:{name:"LineToolArrowMarkLeft"},arrow_right:{name:"LineToolArrowMarkRight"},price_label:{name:"LineToolPriceLabel"},price_note:{name:"LineToolPriceNote"},arrow_marker:{name:"LineToolArrowMarker"},flag:{name:"LineToolFlagMark"},vertical_line:{name:"LineToolVertLine"},horizontal_line:{name:"LineToolHorzLine"},cross_line:{name:"LineToolCrossLine"},horizontal_ray:{name:"LineToolHorzRay"},trend_line:{name:"LineToolTrendLine"},info_line:{name:"LineToolInfoLine"},trend_angle:{name:"LineToolTrendAngle"},arrow:{name:"LineToolArrow"},ray:{name:"LineToolRay"},extended:{name:"LineToolExtended"},parallel_channel:{name:"LineToolParallelChannel"},disjoint_angle:{name:"LineToolDisjointAngle"},flat_bottom:{name:"LineToolFlatBottom"},pitchfork:{name:"LineToolPitchfork"},schiff_pitchfork_modified:{name:"LineToolSchiffPitchfork"},schiff_pitchfork:{name:"LineToolSchiffPitchfork2"},inside_pitchfork:{name:"LineToolInsidePitchfork"},pitchfan:{name:"LineToolPitchfan"},gannbox:{name:"LineToolGannSquare"},gannbox_square:{name:"LineToolGannComplex"},gannbox_fixed:{name:"LineToolGannFixed"},gannbox_fan:{name:"LineToolGannFan"},fib_retracement:{name:"LineToolFibRetracement"},fib_trend_ext:{name:"LineToolTrendBasedFibExtension"},fib_speed_resist_fan:{name:"LineToolFibSpeedResistanceFan"},fib_timezone:{name:"LineToolFibTimeZone"},fib_trend_time:{name:"LineToolTrendBasedFibTime"},fib_circles:{name:"LineToolFibCircles"},fib_spiral:{name:"LineToolFibSpiral"},fib_speed_resist_arcs:{name:"LineToolFibSpeedResistanceArcs"},fib_wedge:{name:"LineToolFibWedge"},fib_channel:{name:"LineToolFibChannel"},xabcd_pattern:{name:"LineTool5PointsPattern"},cypher_pattern:{name:"LineToolCypherPattern"},abcd_pattern:{name:"LineToolABCD"},triangle_pattern:{name:"LineToolTrianglePattern"},"3divers_pattern":{name:"LineToolThreeDrivers"},head_and_shoulders:{name:"LineToolHeadAndShoulders"},elliott_impulse_wave:{name:"LineToolElliottImpulse"},elliott_triangle_wave:{name:"LineToolElliottTriangle"},elliott_triple_combo:{name:"LineToolElliottTripleCombo"},elliott_correction:{name:"LineToolElliottCorrection"},elliott_double_combo:{name:"LineToolElliottDoubleCombo"},cyclic_lines:{name:"LineToolCircleLines"},time_cycles:{name:"LineToolTimeCycles"},sine_line:{name:"LineToolSineLine"},long_position:{
name:"LineToolRiskRewardLong"},short_position:{name:"LineToolRiskRewardShort"},forecast:{name:"LineToolPrediction"},date_range:{name:"LineToolDateRange"},price_range:{name:"LineToolPriceRange"},date_and_price_range:{name:"LineToolDateAndPriceRange"},bars_pattern:{name:"LineToolBarsPattern"},ghost_feed:{name:"LineToolGhostFeed"},projection:{name:"LineToolProjection"},rectangle:{name:"LineToolRectangle"},rotated_rectangle:{name:"LineToolRotatedRectangle"},circle:{name:"LineToolCircle"},ellipse:{name:"LineToolEllipse"},triangle:{name:"LineToolTriangle"},polyline:{name:"LineToolPolyline"},path:{name:"LineToolPath"},curve:{name:"LineToolBezierQuadro"},double_curve:{name:"LineToolBezierCubic"},arc:{name:"LineToolArc"},icon:{name:"LineToolIcon"},regression_trend:{name:"LineToolRegressionTrend"},fixed_range_volume_profile:{name:"LineToolFixedRangeVolumeProfile"}};{const e=i;e.anchored_vwap={name:"LineToolAnchoredVWAP"},e.tweet={name:"LineToolTweet"},e.idea={name:"LineToolIdea"}}},911730:(e,t,r)=>{"use strict";r.d(t,{ChartChangesWatcher:()=>s});var i=r(97639),n=r.n(i);class s{constructor(e,t,r,i){this._undoHistoryHasChanges=!1,this._hasChanges=!1,this._recalculateHaveChanges=()=>{const e=this._undoHistoryHasChanges||this._lineToolsHaveChanges.value();e!==this._hasChanges&&(this._hasChanges=e,this._onValueChanged.fire(e))},this._undoHistory=e,this._lineToolsHaveChanges=t,this._chartSaver=r,this._globalEvents=i,this._onValueChanged=new(n()),this._subscribe()}destroy(){this._unsubscribe(),this._onValueChanged.destroy()}hasChanges(){return this._hasChanges}getOnChange(){return this._onValueChanged}_subscribe(){this._globalEvents.subscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().subscribe(this,this._handleUndoHistoryChange),this._chartSaver.chartSaved().subscribe(this,this._handleChartSaved),this._lineToolsHaveChanges.subscribe(this._recalculateHaveChanges)}_unsubscribe(){this._globalEvents.unsubscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().unsubscribe(this,this._handleUndoHistoryChange),this._chartSaver.chartSaved().unsubscribe(this,this._handleChartSaved),this._lineToolsHaveChanges.unsubscribe(this._recalculateHaveChanges)}_setUndoHistoryHasChanges(e){this._undoHistoryHasChanges=e,this._recalculateHaveChanges()}_handleChartLoaded(){this._setUndoHistoryHasChanges(!1)}_handleUndoHistoryChange(e){e&&!e.customFlag("doesnt_affect_save")&&this._setUndoHistoryHasChanges(!0)}_handleChartSaved(e){e&&this._setUndoHistoryHasChanges(!1)}}},436940:(e,t,r)=>{"use strict";r.d(t,{ChartWidgetApiBase:()=>A});var i=r(588537),n=r(787236),s=r(277036),a=r(273044),o=r(566190),l=r(370062);class c{constructor(e){this._timeScale=e}coordinateToTime(e){const t=this._timeScale.coordinateToIndex(e);return this._timeScale.indexToTimePoint(t)}barSpacingChanged(){return this._timeScale.barSpacingChanged()}rightOffsetChanged(){return this._timeScale.rightOffsetChanged()}setRightOffset(e){this._timeScale.setRightOffset(e)}setBarSpacing(e){this._timeScale.setBarSpacing(e)}
barSpacing(){return this._timeScale.barSpacing()}rightOffset(){return this._timeScale.rightOffset()}width(){return this._timeScale.width()}defaultRightOffset(){return this._timeScale.defaultRightOffset()}}var h=r(97639),d=r.n(h),u=r(888667);const g=new s.TranslatedString("change timezone",(0,n.t)("change timezone"));class m{constructor(e){this._onTimezoneChanged=new(d()),this._chartWidget=e,this._timezoneProperty=e.properties().childs().timezone,this._timezoneProperty.subscribe(this,e=>{this._onTimezoneChanged.fire(e.value())}),e.onAboutToBeDestroyed().subscribe(this,()=>{this._timezoneProperty.unsubscribeAll(this)},!0)}availableTimezones(){return u.availableTimezones}getTimezone(){const e=this._timezoneProperty.value();return(0,i.ensureDefined)(u.availableTimezones.find(t=>t.id===e))}setTimezone(e,t){(0,i.assert)((0,u.timezoneIsAvailable)(e),"Incorrect timezone: "+e),(null==t?void 0:t.disableUndo)?this._timezoneProperty.setValue(e):this._chartWidget.model().setProperty(this._timezoneProperty,e,g)}onTimezoneChanged(){return this._onTimezoneChanged}}var p=r(226269);class _{constructor(e){this._drawer=null,this._context=e,this._rangeBindings=new p.RangeBinding(e)}drawer(){return Promise.all([r.e(48463),r.e(69129),r.e(2e3),r.e(82888),r.e(69875),r.e(8879),r.e(86363),r.e(15998),r.e(25113),r.e(34956),r.e(66333),r.e(93713),r.e(53466),r.e(77962),r.e(46238),r.e(85617),r.e(78268),r.e(3520),r.e(72640),r.e(54947),r.e(7345),r.e(19055),r.e(21420),r.e(12358),r.e(41333),r.e(77079),r.e(83407),r.e(75514),r.e(31023),r.e(792),r.e(61144),r.e(8866)]).then(r.bind(r,321675)).then(e=>(null===this._drawer&&(this._drawer=new e.DateRangeDrawerApi(this._context)),this._drawer))}state(){return this._rangeBindings.state()}onChange(){return this._rangeBindings.onChange()}selectRange(e){this._rangeBindings.selectRange(e)}goToTime(e){const t=this._context.chartWidget.model().model();t.gotoTime(e).then(e=>{const r=t.mainSeries();void 0===e?r.clearGotoDateResult():r.setGotoDateResult(e)})}}var f=r(126974),v=r(210542),b=r(587314),S=r(467659);function y(e,t){const r=()=>{e.completed().unsubscribe(null,i),t(!1)},i=()=>{e.error().unsubscribe(null,r),t(!0)};e.completed().subscribe(null,r,!0),e.error().subscribe(null,i,!0)}var w=r(294766);const C=new s.TranslatedString("change price to bar ratio",(0,n.t)("change price to bar ratio")),T=new s.TranslatedString("toggle lock scale",(0,n.t)("toggle lock scale")),I=new s.TranslatedString("change series style",(0,n.t)("change series style"));class A{constructor(e,t){this._visibleBarsChanged=new(d()),this._crosshairMoved=new(d()),this._ranges=null,this._alignerResolution=a.Interval.parse(""),this._alignerSymbolInfo=null,this._dwmAligner=null,this._chartWidget=e,this._activateChart=t,this._timezoneApi=new m(e),this._chartWidget.withModel(this,()=>{this._chartWidget.model().crossHairSource().moved().subscribe(this,this._onCrosshairMoved)})}getPriceToBarRatio(){return this._chartWidget.model().model().mainSeriesScaleRatioProperty().value()}setPriceToBarRatio(e,t){
const r=this._chartWidget.model(),i=r.model(),n=i.mainSeriesScaleRatioProperty();(null==t?void 0:t.disableUndo)?new S.SetScaleRatioPropertiesCommand(n,e,null,i).redo():r.setScaleRatioProperty(n,e,C)}isPriceToBarRatioLocked(){return this._chartWidget.model().model().mainSeries().priceScale().isLockScale()}setPriceToBarRatioLocked(e,t){const r=this._chartWidget.model(),i=r.model(),n=i.mainSeries().priceScale();(null==t?void 0:t.disableUndo)?new b.SetPriceScaleModeCommand({lockScale:e},n,null,i).redo():r.setPriceScaleMode({lockScale:e},n,T)}onDataLoaded(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().dataEvents().completed())}onSymbolChanged(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().dataEvents().symbolResolved())}onIntervalChanged(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onIntervalChanged())}onVisibleRangeChanged(){return this._makeSubscriptionFromDelegate(this._visibleBarsChanged)}onChartTypeChanged(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onStyleChanged())}onSeriesTimeframe(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().dataEvents().seriesTimeFrame())}whenChartReady(e){this._chartWidget.withModel(this,e)}crossHairMoved(){return this._makeSubscriptionFromDelegate(this._crosshairMoved)}setSymbol(e,t){if(e===this.symbol())return void(null==t||t());const r=e=>{!e&&t&&t()},i=this._chartWidget.model().mainSeries().dataEvents();t&&y(i,r),this._activateChart(),this._chartWidget.setSymbol(e)}setResolution(e,t){const r=a.Interval.normalize(e);if(null===r||r===this.resolution())return void(null==t||t());const i=e=>{!e&&t&&t()},n=this._chartWidget.model().mainSeries().dataEvents();t&&y(n,i),this._activateChart(),this._chartWidget.setResolution(r)}setChartType(e,t){const r=this._chartWidget.model().mainSeries().properties().childs().style;if(r.value()===e)return void(null==t||t());const i=e=>{!e&&t&&t()},n=this._chartWidget.model().mainSeries().dataEvents();t&&y(n,i),this._chartWidget.model().setChartStyleProperty(r,e,I)}getAllStudies(){return this._chartWidget.model().model().allStudies(!0).map(v.studyEntityInfo)}getAllPanesHeight(){const e=this._chartWidget.model().model().panes();if(this._chartWidget.isMaximizedPane()){let t=0,r=0;e.forEach(e=>{t+=e.height(),r+=e.stretchFactor()});const i=r/t;return e.map(e=>Math.round(e.stretchFactor()/i*100)/100)}return e.map(e=>e.height())}setAllPanesHeight(e){const t=this._chartWidget.model().model(),r=t.panes();(0,i.assert)(r.length===e.length,"There`s a mismatch between the number of heights you provided and the number of panes.");const n=r.reduce((e,t)=>e+t.stretchFactor(),0)/e.reduce((e,t)=>e+t);e.forEach((e,t)=>{const i=e*n;r[t].setStretchFactor(i)}),t.fullUpdate()}sessions(){return this._chartWidget.model().model().sessions()}getTimeScaleLogicalRange(){return this._chartWidget.model().timeScale().logicalRange()}getTimezoneApi(){return this._timezoneApi}exportData(e){const t={...e}
;return void 0!==t.from&&(t.from=this._convertTimeFromPublic(t.from)),void 0!==t.to&&(t.to=this._convertTimeFromPublic(t.to)),Promise.reject("Data export is not supported")}barTimeToEndOfPeriod(e){const t=this._prepareEndOfPeriodArgs();return function(e,t,r){if(r.isDays())return t;if(e.moveTo(1e3*t),r.isIntraday()){const r=e.indexOfBar(1e3*t);if(r<0)throw new Error(t+" is out of the instrument session ");return e.endOfBar(r)/1e3}return e.startOfBar(l.SessionStage.LASTBAR_SESSION)/1e3}(t.barBuilder,e,t.intervalObj)}endOfPeriodToBarTime(e){const t=this._prepareEndOfPeriodArgs();return function(e,t,r){if(r.isDays())return t;const i=1e3*t-1;if(e.moveTo(i),r.isIntraday()){const r=e.indexOfBar(i);if(r<0)throw new Error(t+" is out of the instrument session ");return e.startOfBar(r)/1e3}return t=e.startOfBar(0)/1e3}(t.barBuilder,e,t.intervalObj)}properties(){return this._chartWidget.properties()}setBarSpacing(e){this._chartWidget.model().timeScale().setBarSpacing(e)}scrollChartByBar(e){this._chartWidget.model().scrollChartByBar(e)}mergeAllScales(e){this._chartWidget.model().mergeAllScales(e)}chartPainted(){return this._chartWidget.chartPainted()}axesSizeReady(){for(const e of this._chartWidget.paneWidgets()){for(const t of e.leftPriceAxisesContainer().axes())if(!t.sizeReady())return!1;for(const t of e.rightPriceAxisesContainer().axes())if(!t.sizeReady())return!1}return!0}applyOverrides(e){this._chartWidget.applyOverrides(e)}addOverlayStudy(e,t,r){return this._chartWidget.addOverlayStudy(e,t,r)}ranges(){return null===this._ranges&&(this._ranges=new _({chartWidget:this._chartWidget,chartWidgetCollection:this._chartWidget.chartWidgetCollection(),availableTimeFrames:f.availableTimeFrames})),this._ranges}getTimeScale(){return new c(this._chartWidget.model().timeScale())}_destroy(){this._chartWidget.hasModel()&&this._chartWidget.model().crossHairSource().moved().unsubscribeAll(this)}_createStudy(e){return new Promise((t,r)=>{this._chartWidget.insertStudy(e).then(e=>{null===e?r("Failed to create study"):t(e.id())})})}_convertTimeToPublic(e){const t=this._getSeriesAligner();return null!==t?t.timeToExchangeTradingDay(1e3*e)/1e3:e}_convertIndexToPublicTime(e){const t=this._chartWidget.model(),r=t.timeScale();if(r.isEmpty())return null;const n=r.points(),s=(0,i.ensureNotNull)(n.firstIndex()),a=(0,i.ensureNotNull)(n.lastIndex());let o=null;if(s<=e&&e<=a)o=n.valueAt(e);else if(e>a){const n=t.mainSeries().syncModel();if(null!==n){const t=(0,i.ensureNotNull)(r.indexToTimePoint(a));o=n.projectTime(t,e-a)}}return null!==o&&(o=this._convertTimeToPublic(o)),o}_convertTimeFromPublic(e){const t=this._getSeriesAligner();return null!==t?t.timeToSessionStart(1e3*e)/1e3:e}_getSeriesAligner(){const e=this._chartWidget.model().mainSeries(),t=e.interval(),r=a.Interval.parse(t),i=e.symbolInfo();return this._alignerResolution.isEqualTo(r)&&this._alignerSymbolInfo===i||(this._dwmAligner=null===i?null:(0,w.createDwmAligner)(t,i),this._alignerResolution=r,this._alignerSymbolInfo=i),this._dwmAligner}_onCrosshairMoved(e){
const t=this._convertIndexToPublicTime(e.index);null!==t&&this._crosshairMoved.fire({price:e.price,time:t})}_makeSubscriptionFromDelegate(e){return{subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),unsubscribeAll:e.unsubscribeAll.bind(e)}}_prepareEndOfPeriodArgs(){const e=this._chartWidget.model().model(),t=e.timezone(),r=(0,i.ensureNotNull)(e.mainSeries().symbolInfo()),n=e.mainSeries().interval(),s=new o.SessionInfo(t,r.session,r.session_holidays,r.corrections);return{barBuilder:(0,o.newBarBuilder)(n,s,s),intervalObj:a.Interval.parse(n)}}}},982405:(e,t,r)=>{"use strict";var i=r(588537).ensureNotNull,n=r(776734).getTracker,s=r(178323),a=s.LineDataSourceApi,o=s.isLineToolRiskReward,l=r(830384).StudyApi,c=r(125853).SeriesApi,h=r(100148).SelectionApi,d=r(210493).PaneApi,u=r(294766).createDwmAligner,g=r(273044).Interval,m=r(741511).supportedLineTools,p=r(451902).showTooManyStudiesNotice,_=r(270617),f=_.isNumber,v=_.deepEquals,b=r(540968).createLineToolProperties,S=r(540968).prepareLineToolPropertiesByOwnerSource,y=r(210542).lineToolEntityInfo,w=r(914554).LineToolsGroupControllerApi,C=r(69318).RemoveSourcesCommand,T=r(29084).isLineDrawnWithPressedButton,I=r(436940).ChartWidgetApiBase,A=r(308170);const W=r(345848).trackEvent;function P(e,t){return t.map((function(t){return e.dataSourceForId(t)}))}e.exports=class extends I{constructor(e,t){super(e,t),this._panes=new WeakMap,this._studies=new WeakMap,this._lineDataSources=new WeakMap,this._selectionApi=null,this._prevVisibleRange=null,this._chartWidget.onAboutToBeDestroyed().subscribe(this,this._destroy,!0),this._chartWidget.withModel(this,(function(){this._chartWidget.model().timeScale().logicalRangeChanged().subscribe(this,this._onLogicalRangeChanged)}))}id(){return this._chartWidget.id()}_getPaneApi(e){var t=this._panes.get(e);return void 0===t&&(t=new d(e,this._chartWidget),this._panes.set(e,t)),t}_getStudyApi(e){var t=this._studies.get(e);return void 0===t&&(t=new l(e,this._chartWidget),this._studies.set(e,t)),t}_getLineDataSourceApi(e){var t=this._lineDataSources.get(e);return void 0===t&&(t=new a(e,this._chartWidget.model(),{apiPointsToDataSource:this._convertUserPointsToDataSource.bind(this),dataSourcePointsToPriced:e=>{var t=this._chartWidget.model().mainSeries().syncModel(),r=this._chartWidget.model().timeScale();return e.map(e=>{var i=r.normalizeBarIndex(e.index);return{price:e.price,time:this._convertTimeToPublic(t.projectTime(i.time_t,i.offset))}})}}),this._lineDataSources.set(e,t)),t}executeActionById(e){this._chartWidget.executeActionById(e)}getCheckableActionState(e){return this._chartWidget.getCheckableActionState(e)}setZoomEnabled(e){this._chartWidget.model().model().setZoomEnabled(e)}setScrollEnabled(e){this._chartWidget.model().model().setScrollEnabled(e)}refreshMarks(){this._chartWidget.refreshMarks()}clearMarks(){this._chartWidget.clearMarks()}symbol(){return this._chartWidget.getSymbol()}symbolExt(){var e=this._chartWidget.model().mainSeries().symbolInfo();return e?{symbol:e.name,full_name:e.full_name,exchange:e.exchange,
description:e.description,type:e.type,pro_name:e.pro_name,typespecs:e.typespecs}:null}resolution(){return this._chartWidget.model().mainSeries().properties().interval.value()}resetData(){this._chartWidget.model().mainSeries().rerequestData()}setEntityVisibility(e,t){console.warn("`setEntityVisibility` is deprecated. Use shape/study API instead");var r=this._chartWidget.model().model().dataSourceForId(e);if(r){var i=r.properties();i&&i.visible&&i.visible.setValue(t)}}availableZOrderOperations(e){var t=P(this._chartWidget.model().model(),e);return this._chartWidget.model().availableZOrderOperations(t)}sendToBack(e){var t=P(this._chartWidget.model().model(),e);this._chartWidget.model().sendToBack(t)}bringToFront(e){var t=P(this._chartWidget.model().model(),e);this._chartWidget.model().bringToFront(t)}insertAfter(e,t){var r=this._chartWidget.model().model(),i=P(r,e),n=r.dataSourceForId(t);this._chartWidget.model().insertAfter(i,n)}insertBefore(e,t){var r=this._chartWidget.model().model(),i=P(r,e),n=r.dataSourceForId(t);this._chartWidget.model().insertBefore(i,n)}bringForward(e){var t=P(this._chartWidget.model().model(),e);this._chartWidget.model().bringForward(t)}sendBackward(e){var t=P(this._chartWidget.model().model(),e);this._chartWidget.model().sendBackward(t)}showPropertiesDialog(e){var t=this._chartWidget.model().model().dataSourceForId(e);if(null===t)throw new Error("Study or shape "+e+" does not exist");this._chartWidget.showChartPropertiesForSource(t)}getAllShapes(){return this._chartWidget.model().model().allLineTools().map(y).filter((function(e){return null!==e.name}))}removeAllShapes(){this._chartWidget.removeAllDrawingTools()}removeAllStudies(){this._chartWidget.removeAllStudies()}removeEntity(e,t){var r=this._chartWidget.model().chartModel().dataSourceForId(e);r?t&&t.disableUndo?new C(this._chartWidget.model().chartModel(),[r],"").redo():this._chartWidget.model().removeSource(r,!0,!0):console.warn("Can't find a source with id: "+e)}removeEntityWithUndo(e){var t=this._chartWidget.model().chartModel().dataSourceForId(e);this._chartWidget.model().removeSource(t,!1)}selection(){return null===this._selectionApi&&(this._selectionApi=new h(this._chartWidget.model().model())),this._selectionApi}createStudyTemplate(e){return this._chartWidget.model().model().studyTemplate(e.saveSymbol,e.saveInterval)}drawOnAllCharts(e){A.drawOnAllCharts.setValue(e)}applyStudyTemplate(e){this._chartWidget.model().applyStudyTemplate(e,""+1e3*Math.random())}setVisibleRange(e,t){throw new Error("Not implemented")}getVisibleRange(){var e={from:0,to:0},t=this._chartWidget.model().timeScale();if(t.isEmpty())return e;var r=t.coordinateToVisibleIndex(0),i=t.coordinateToVisibleIndex(t.width()-1),n=this._convertIndexToPublicTime(i);return null===n||(e.from=this._convertIndexToPublicTime(Math.max(t.points().firstIndex(),r)),e.to=n),e}getVisiblePriceRange(){return console.warn("`getVisiblePriceRange` is deprecated. Use Price Scale API instead"),
this._chartWidget.model().mainSeries()?this._chartWidget.model().mainSeries().priceScale().priceRangeInPrice():null}scrollPosition(){return console.warn("`scrollPosition` is deprecated. Use rightOffset from Time Scale API instead"),this._chartWidget.model().timeScale().rightOffset()}defaultScrollPosition(){return console.warn("`defaultScrollPosition` is deprecated. Use defaultRightOffset from Time Scale API instead"),this._chartWidget.model().timeScale().defaultRightOffset().value()}_createTradingPrimitive(e,t){var r,n=this._chartWidget.model(),s=n.model(),a=s.paneForSource(s.mainSeries());function o(){var e=TradingView.CLOSE_PLOT,t=i(n.mainSeries().bars().last());return{index:t.index,price:t.value[e]}}return(r=t?s.createLineTool(a,o(),e):n.createLineTool({pane:a,point:o(),linetool:e}))?r._adapter:void 0}createOrderLine(e){e=e||{};return this._createTradingPrimitive("LineToolOrder",e.disableUndo)}createPositionLine(e){e=e||{};return this._createTradingPrimitive("LineToolPosition",e.disableUndo)}createExecutionShape(e){e=e||{};return this._createTradingPrimitive("LineToolExecution",e.disableUndo)}createShape(e,t){return this.createMultipointShape([e],t)}_alignPoints(e){var t=this._chartWidget.model().model(),r=t.mainSeries(),i=r.interval();if(t.timeScale().isEmpty()||!g.isDWM(i))return e;var n=u(i,r.symbolInfo());return null===n?e:e.map((function(e){return n.timeToSessionStart(1e3*e)/1e3}))}_convertUserPointsToDataSource(e){var t=this._chartWidget.model().model(),r=t.mainSeries(),i=t.timeScale().points(),n=r.data();if(t.timeScale().isEmpty())return null;var s=e.map((function(e){return e.time||0})),a=this._alignPoints(s);function o(e,t,s){var a=i.closestIndexLeft(e)||0,o={index:a},l=i.valueAt(a);if(e>l&&a===i.lastIndex())(c=r.syncModel().distance(l,e)).success&&(o.index=o.index+c.result);else if(e<l&&a===i.firstIndex()){var c;(c=r.syncModel().distance(e,l)).success&&(o.index=o.index-c.result)}if(f(t))o.price=t;else{var h=s?["open","high","low","close"].indexOf(s)+1:1;h<=0&&(h=1),o.price=n.valueAt(a)[h]}return o}for(var l=[],c=0;c<e.length;c++){var h=e[c];l.push(o(a[c],h.price,h.channel))}return l}createMultipointShape(e,t,r){var i=m[t.shape]||m.flag;W("API","CreateDrawing",i.name),n().then(e=>{null!==e&&e.trackChartApiDrawingCreation(i.name)});var s=this._chartWidget.model().model(),a=s.mainSeries();if(!s.timeScale().isEmpty()){var l=s.dataSourceForId(t.ownerStudyId)||a,c=s.paneForSource(l),h=this._convertUserPointsToDataSource(e);if(i.onlySelectable)throw new Error('Cannot create "'+t.shape+'" shape');if("LineToolPolyline"===i.name||"LineToolPath"===i.name||"LineToolGhostFeed"===i.name)h[0].price===h[h.length-1].price&&h[0].index===h[h.length-1].index||h.push(h[0]);else if("LineToolIcon"===i.name){if(t.icon=t.icon||t.overrides&&t.overrides.icon,!t.hasOwnProperty("icon"))throw new Error("icon must be specified in options");t.overrides=t.overrides||{},t.overrides.icon=t.icon}var d,u,g=b(i.name,void 0,this._chartWidget.model().model());if(S(g,l),
t.overrides)for(var p in t.overrides)g[p]?g[p].mergeAndFire(t.overrides[p]):o(i.name)&&-1!==["profitLevel","stopLevel"].indexOf(p)&&g.addProperty(p,t.overrides[p]);if(void 0!==g.text&&t.text&&g.text.setValue(t.text),null!==(u=t.disableUndo?(d=this._chartWidget.model().model()).createLineTool(c,h[0],i.name,g,void 0,l):(d=this._chartWidget.model()).createLineTool({pane:c,point:h[0],linetool:i.name,properties:g,ownerSource:l}))){if(o(i.name)){if(h.length>2)throw new Error("Wrong points count for "+t.shape+". Required 1 or 2");2===h.length&&(u.startChanging(1,h[1]),u.setPoint(1,h[1]),u.endChanging())}else{var _=u.pointsCount();if(_!==h.length&&-1!==_)throw new Error("Wrong points count for "+t.shape+". Required "+_);for(var f=T(i.name),v=1;v<h.length&&this._chartWidget.model().lineBeingCreated();v++)u.setLastPoint(h[v]),d.continueCreatingLine(h[v],null,v<h.length-1||f);f&&(d.finishLineTool(u),d.continueCreatingLine(h[h.length-1],null,!1))}if(t.lock&&u.setUserEditEnabled(!1),t.disableSelection&&u.setSelectionEnabled(!1),t.disableSave&&(u.customization.disableSave=!0),t.hasOwnProperty("showInObjectsTree")&&(u.customization.showInObjectsTree=t.showInObjectsTree),t.zOrder){var y=this._chartWidget.model().availableZOrderOperations([u]);"top"===t.zOrder&&y.bringToFrontEnabled?d.bringToFront([u]):"bottom"===t.zOrder&&y.sendToBackEnabled&&d.sendToBack([u])}return u.id()}}}getShapeById(e){var t=this._chartWidget.model().model().getLineToolById(e);if(null===t)throw new Error("There is no such shape");return this._getLineDataSourceApi(t)}createStudy(e,t,r,i,n,s){if("function"==typeof n)return console.warn('"createStudy" does not take "callback" parameter anymore'),Promise.resolve(null);if(s=s||{},"string"!=typeof e)return this._createStudy(e);if(s.checkLimit&&!this._chartWidget.model().canCreateStudy())return p(),Promise.resolve(null);e=e.toLowerCase();var a=s.disableUndo?this._chartWidget.model().model():this._chartWidget.model(),o=(void 0).findStudyMetaInfoByDescription(a.studiesMetaData(),e),l=a.createStudyInserter({type:"java",studyId:o.id});if(l.setForceOverlay(t),s.priceScale&&l.setPreferredPriceScale(function(e){switch(e){case"no-scale":return"overlay";case"as-series":return"as-series";case"new-left":return"left";case"new-right":return"right";default:throw new Error('The pricescale "'+e+'" is invalid, the only valid options are "no-scale", "as-series", "new-left" and "new-right".')}}(s.priceScale)),s.allowChangeCurrency&&l.setAllowChangeCurrency(!0),s.allowChangeUnit&&l.setAllowChangeUnit(!0),Array.isArray(i)){console.warn("Passing study inputs as an ordered array is now deprecated. Please use an object where keys correspond to the inputs of your study instead.");for(var c={},h=0;h<o.inputs.length;++h)c[o.inputs[h].id]=i[h];i=c}return l.insert((function(){return Promise.resolve({inputs:i||{}})})).then((function(e){return n&&(void 0)(e,n),r&&e.setUserEditEnabled(!1),e.id()}))}getStudyById(e){var t=this._chartWidget.model().model().getStudyById(e);if(null===t)throw new Error("There is no such study")
;return this._getStudyApi(t)}getSeries(){var e=this._chartWidget.model(),t=e.mainSeries();return new c(t,e)}chartType(){return this._chartWidget.model().mainSeries().properties().style.value()}priceFormatter(){return this._chartWidget.model().mainSeries().priceScale().formatter()}dataReady(e){var t=!this._chartWidget.hasModel()||!this._chartWidget.model().mainSeries()||this._chartWidget.model().mainSeries().data().isEmpty();return e&&(t?this.onDataLoaded().subscribe(null,e,!0):e()),!t}_onLogicalRangeChanged(){var e=this._chartWidget.model().mainSeries(),t=e.data().isEmpty();if(null!==this._chartWidget.model().timeScale().visibleBarsStrictRange()&&t)e.dataEvents().completed().subscribe(this,this._onLogicalRangeChanged,!0);else{var r=this.getVisibleRange();null!==this._prevVisibleRange&&v(this._prevVisibleRange,r)[0]||(this._prevVisibleRange=r,this._visibleBarsChanged.fire(r))}}_destroy(){super._destroy(),this._chartWidget.hasModel()&&this._chartWidget.model().timeScale().logicalRangeChanged().unsubscribe(this,this._onLogicalRangeChanged)}setTimezone(e){this._chartWidget.setTimezone(e)}getTimezone(){return this._chartWidget.getTimezone()}getPanes(){return this._chartWidget.model().chartModel().panes().map((function(e){return this._getPaneApi(e)}),this)}canZoomOut(){return!this._chartWidget.model().zoomStack().isEmpty()}zoomOut(){this.canZoomOut()&&this._chartWidget.model().zoomFromViewport()}shapesGroupController(){return new w(this._chartWidget.model().lineToolsGroupController(),this._chartWidget.model())}isSelectBarRequested(){return this._chartWidget.selectPointMode().value()}requestSelectBar(){if(this.isSelectBarRequested())return Promise.reject("already requested");var e=this;return new Promise((function(t,r){e._chartWidget.requestSelectPoint({pointType:"time"}).then((function(r){t(e._convertTimeToPublic(r.point.time))})).catch((function(){r("cancelled")}))}))}cancelSelectBar(){this.isSelectBarRequested()&&this._chartWidget.cancelRequestSelectPoint()}}},351728:(e,t,r)=>{"use strict";r.d(t,{createLayout:()=>a,layoutInitialSizingState:()=>o});var i=r(203308),n=r(588537);function s(e,t,r){const i=new Set;if("number"==typeof e)return i.add(e),{indices:i,smallestIndex:e,sizer:e=>e,splitters:()=>[],resizeApplier:(e,t,r,i,n)=>n,syncSublayoutsBySplitter:(e,t)=>t};const a=e[0],o=e.slice(1).map(e=>s(e,t));let l=1/0;for(const e of o)for(const t of Array.from(e.indices))t<l&&(l=t),i.add(t);const c=(e,t,r,i,n,s,a,o)=>{const l="h"===a?e.width:e.height;let c,h,d;if(o){const e=t*r+i*l;c=Math.round(e),h=t===s-1?l-c-1:Math.round(e+n*l)-c}else{const e=(l-(s-1)*r)/s,i=t*(e+r);c=Math.round(i),h=Math.round(i+e)-c}return d="h"===a?{top:e.top,left:e.left+c,height:e.height,width:h}:{top:e.top+c,left:e.left,height:h,width:e.width},d},h=(e,t,r,i,n,s,a)=>{if("number"==typeof r)return[];const o=r[0],l=r.slice(1);return l.reduce((r,d,u)=>{var g;const m=null==a?void 0:a[u],p=null!==(g=null==m?void 0:m.percent)&&void 0!==g?g:1/l.length,_=c(e,u,t,r.sumOfCoeffsBefore,p,l.length,o,a),f=r.sumOfCoeffsBefore+p;if(u<l.length-1){
const e=`${s}-${i}-${u}-${o}`;let t;t="v"===o?{left:_.left,top:_.top+_.height-6+1,width:_.width,height:12}:{left:_.left+_.width-6+1,top:_.top,width:12,height:_.height};const a={level:i,orientation:o,indexes:[...n,u],metrics:t,className:e};r.splitters.push(a)}return Array.isArray(d)?{splitters:r.splitters.concat(h(_,t,d,i+1,[...n,u],s,null==m?void 0:m.substate)),sumOfCoeffsBefore:f}:{splitters:r.splitters,sumOfCoeffsBefore:f}},{splitters:[],sumOfCoeffsBefore:0}).splitters};return{indices:i,smallestIndex:l,sizer:(e,t,r,i,n)=>{let s,l,h,d=0,u=0,g=0;for(let e=0;e<o.length;e++){const i=o[e];i.smallestIndex>=r||(i.indices.has(t)&&(s=i,h=null==n?void 0:n[e].substate,n&&(g=n[e].percent),l=d),d++,n&&0===g&&(u+=n[e].percent))}const m=c(e,l,i,u,g,d,a,n);return s.sizer(m,t,r,i,h)},splitters:(t,r,i)=>h(t,r,e,0,[],"",i),resizeApplier:(t,r,i,s,o,l)=>function e(t,r,i,s,o,l,h,d){if("number"==typeof s)return l;const u=s.slice(1),g=[0];for(let e=0;e<u.length;e++)g.push(g[g.length-1]+l[e].percent);if(h<o.level)return u.map((s,m)=>{var p;const _=null==l?void 0:l[m];if("number"==typeof s)return _;if(!d&&m!==o.indexes[h])return _;const f=null!==(p=null==_?void 0:_.percent)&&void 0!==p?p:1/u.length,v=c(t,m,r,g[m],f,u.length,a,l);return{percent:_.percent,substate:e(v,r,i,s,o,(0,n.ensureDefined)(_.substate),h+1,d)}});{const e=s[0];if(e!==o.orientation)return l;const r=o.indexes[h],n="v"===e?t.height:t.width,a=i/n,c=l[r].percent+l[r+1].percent;return l[r].percent+=a,l[r].percent=Math.min(c-.05,Math.max(.05,l[r].percent)),l[r+1].percent-=a,l[r+1].percent=Math.min(c-.05,Math.max(.05,l[r+1].percent)),l}}(t,r,i,e,s,o,0,l),syncSublayoutsBySplitter:function(t,r){const i=function e(t,r){if(1===t.length)return r;{const i=(0,n.ensureDefined)(r[t[0]].substate);return e(t.slice(1),i)}}(t.indexes,r);return function e(t,r,i,s,a){if("number"==typeof t)return i;const o=t.slice(1);return a<r.level?o.map((t,o)=>{const l=null==i?void 0:i[o];return"number"==typeof t?l:{percent:l.percent,substate:e(t,r,(0,n.ensureDefined)(l.substate),s,a+1)}}):(i.forEach((e,t)=>e.percent=s[t].percent),i)}(e,t,r,i,0)}}}function a(e,t,r){const i=s(e,t);return{title:r,count:i.indices.size,sizer:i.sizer,splitters:i.splitters,resizeApplier:i.resizeApplier,syncSublayoutsBySplitter:i.syncSublayoutsBySplitter,expression:e,layoutType:t}}function o(e){return function e(t){return t.map(r=>{if((0,i.default)(r))return{percent:1/t.length};{const i=r.slice(1);return{percent:1/t.length,substate:e(i)}}})}(e.slice(1))}},467608:(e,t,r)=>{"use strict";r.d(t,{layouts:()=>o,isMultipleLayout:()=>l});var i=r(938069),n=r(351728);const s={s:{title:"1 chart",count:1,layoutType:"s",sizer:(e,t)=>{if(0!==t)throw new RangeError("invalid index");return e},splitters:()=>[],resizeApplier:(e,t,r,i,n)=>n,syncSublayoutsBySplitter:(e,t)=>t,expression:["h",0]}};let a;a={"2h":(0,n.createLayout)(i["2h"],"2h","2-up horizontal"),"2v":(0,n.createLayout)(i["2v"],"2v","2-up vertical"),"2-1":(0,n.createLayout)(i["2-1"],"2-1","2 at top and 1 at bottom"),"1-2":(0,n.createLayout)(i["1-2"],"1-2","1 at top and 2 at bottom"),
"3s":(0,n.createLayout)(i["3s"],"3s","3-up stacked"),"3r":(0,n.createLayout)(i["3r"],"3r","3-up stacked left"),"3h":(0,n.createLayout)(i["3h"],"3h","3-up horizontal"),"3v":(0,n.createLayout)(i["3v"],"3v","3-up vertical"),4:(0,n.createLayout)(i[4],"4","4-up"),"4h":(0,n.createLayout)(i["4h"],"4h","4-up horizontal"),"4v":(0,n.createLayout)(i["4v"],"4v","4-up vertical"),"4s":(0,n.createLayout)(i["4s"],"4s","4-up stacked"),"2-2":(0,n.createLayout)(i["2-2"],"2-2","2 at top and 2 at bottom"),"1-3":(0,n.createLayout)(i["1-3"],"1-3","1 at top and 3 at bottom"),"1-4":(0,n.createLayout)(i["1-4"],"1-4","1 at top and 4 at bottom"),"5s":(0,n.createLayout)(i["5s"],"5s","5-up stacked"),6:(0,n.createLayout)(i[6],"6","6-up"),"6c":(0,n.createLayout)(i["6c"],"6c","6-up in two columns"),8:(0,n.createLayout)(i[8],"8","8-up"),"8c":(0,n.createLayout)(i["8c"],"8c","8-up in two columns")};const o={...s,...a};function l(e){return!function(e){return"s"===e}(e)}},914554:(e,t,r)=>{"use strict";r.d(t,{LineToolsGroupControllerApi:()=>a});var i=r(534953),n=r(588537),s=r(540968);class a{constructor(e,t){this._controller=e,this._model=t}createGroupFromSelection(){return this._controller.createGroupFromSelection().id}removeGroup(e){const t=(0,n.ensureDefined)(this._groupById(e));this._controller.removeGroup(t)}groups(){return this._controller.groups().map(e=>e.id)}shapesInGroup(e){const t=(0,n.ensureDefined)(this._groupById(e));return(0,i.sortSources)(t.lineTools()).map(e=>e.id())}excludeShapeFromGroup(e,t){const r=(0,n.ensureDefined)(this._groupById(e)),i=(0,n.ensureNotNull)(this._model.dataSourceForId(t));(0,n.assert)((0,s.isLineTool)(i),"Passed shapeId is not a line tool"),this._controller.excludeLineToolFromGroup(r,i)}addShapeToGroup(e,t){const r=(0,n.ensureDefined)(this._groupById(e)),i=(0,n.ensureNotNull)(this._model.dataSourceForId(t));(0,n.assert)((0,s.isLineTool)(i),"Passed shapeId is not a line tool"),this._controller.addLineToolToGroup(r,i)}availableZOrderOperations(e){const t=(0,n.ensureDefined)(this._groupById(e));return this._controller.availableZOrderOperations(t)}bringToFront(e){const t=(0,n.ensureDefined)(this._groupById(e));this._controller.bringToFront(t)}bringForward(e){const t=(0,n.ensureDefined)(this._groupById(e));this._controller.bringForward(t)}sendBackward(e){const t=(0,n.ensureDefined)(this._groupById(e));this._controller.sendBackward(t)}sendToBack(e){const t=(0,n.ensureDefined)(this._groupById(e));this._controller.sendToBack(t)}insertAfter(e,t){const r=(0,n.ensureDefined)(this._groupById(e)),i=(0,n.ensureNotNull)(this._groupById(t)||this._model.dataSourceForId(t));this._controller.insertAfter(r,i)}insertBefore(e,t){const r=(0,n.ensureDefined)(this._groupById(e)),i=(0,n.ensureNotNull)(this._groupById(t)||this._model.dataSourceForId(t));this._controller.insertBefore(r,i)}groupVisibility(e){return(0,n.ensureDefined)(this._groupById(e)).visibility()}setGroupVisibility(e,t){const r=(0,n.ensureDefined)(this._groupById(e));this._controller.setGroupVisibility(r,t)}groupLock(e){return(0,n.ensureDefined)(this._groupById(e)).locked()}
setGroupLock(e,t){const r=(0,n.ensureDefined)(this._groupById(e));this._controller.setGroupLock(r,t)}getGroupName(e){return(0,n.ensureDefined)(this._groupById(e)).name()}setGroupName(e,t){const r=(0,n.ensureDefined)(this._groupById(e));this._controller.setGroupName(r,t)}canBeGroupped(e){const t=e.map(e=>(0,n.ensureNotNull)(this._model.dataSourceForId(e)));return!t.some(e=>!(0,s.isLineTool)(e))&&this._controller.canBeGroupped(t)}_groupById(e){return this._controller.groups().find(t=>t.id===e)}}},713917:(e,t,r)=>{"use strict";r.d(t,{AbstractJsonStoreService:()=>s,CommonJsonStoreService:()=>a});var i=r(97639),n=r.n(i);class s{constructor(e,t,r,i,s){this._onChange=new(n()),this._handleChange=()=>{this._onChange.fire(this.get())},this._crossTabEvents=e,this._jsonKeyValueStore=t,this.CROSSTAB_EVENT_NAME=r,this.JSON_STORE_KEY=i,this.defaultStoreValue=this._serialize(s),this._subscribe()}get(){const e=this._jsonKeyValueStore.getJSON(this.JSON_STORE_KEY,this.defaultStoreValue);return this._deserialize(e)}set(e,t){const r=this._serialize(e);this._jsonKeyValueStore.setJSON(this.JSON_STORE_KEY,r,t),this._crossTabEvents.emit(this.CROSSTAB_EVENT_NAME),this._onChange.fire(e)}getOnChange(){return this._onChange}destroy(){this._unsubscribe(),this._onChange.destroy(),delete this._onChange}_subscribe(){this._crossTabEvents.on(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.subscribe(this,this._handleChange)}_unsubscribe(){this._crossTabEvents.off(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.unsubscribe(this,this._handleChange)}}class a extends s{_serialize(e){return e}_deserialize(e){return e}}},589468:(e,t,r)=>{"use strict";r.d(t,{parseIntervalValue:()=>l,intervalIsSupported:()=>c,canShowSpreadActions:()=>h,globalKeypressMatches:()=>d});var i=r(611688),n=r(364019),s=r(583912),a=r(273044),o=r(97128);new RegExp("^"+o.types.QUANDL,"i");function l(e){let t;t=/^[,\s]*(^[1-9][0-9]*)?\s*([hdwmsr]?)\s*$/i;const r=t.exec(e)||[],i=~~r[1],n=r[2]&&r[2].toUpperCase()||null,s={qty:!i&&n?1:i,unit:n};return s.error=!i&&!n,s.intraday=!(s.error||s.unit&&"H"!==s.unit&&"S"!==s.unit&&"T"!==s.unit),s}function c(e){if(i.enabled("allow_supported_resolutions_set_only")){const t=a.Interval.normalize(e);return null!==t&&(0,n.isAvailable)(t)}{const t=l(e);if(t.error)return!1;if(t.intraday)return s.linking.intraday.value();{const e=s.linking.supportedResolutions.value();return!e||null!==t.unit&&!!~e.indexOf(t.unit)}}}function h(){let e=!1;return e="cme"!==window.TradingView.widgetCustomer&&"bovespa"!==window.TradingView.widgetCustomer,e}function d(e){if(e.ctrlKey)return!1;if(e.metaKey)return!1;if(!e.charCode)return!1;if(!e.which||e.which<=32)return!1;if(null!==e.target&&/^(input|textarea)$/i.test(e.target.tagName))return!1;{const e=r.c[337225];if(e&&e.exports.isOpenedModals())return!1}return!0}},187545:(e,t,r)=>{"use strict";function i(){
return Promise.all([r.e(48463),r.e(69129),r.e(82888),r.e(15998),r.e(25113),r.e(63562),r.e(63975),r.e(34956),r.e(7427),r.e(31205),r.e(53466),r.e(87836),r.e(77962),r.e(46238),r.e(85617),r.e(63921),r.e(3520),r.e(26149),r.e(93037),r.e(87670),r.e(98371),r.e(88740),r.e(62853),r.e(71577),r.e(54104),r.e(53750),r.e(10307),r.e(76251),r.e(41654),r.e(39859),r.e(99997),r.e(75514),r.e(98449),r.e(69397),r.e(93921),r.e(29594),r.e(61310),r.e(43731),r.e(9940),r.e(21754)]).then(r.bind(r,191406))}r.d(t,{loadNewSymbolSearch:()=>i})},231780:(e,t,r)=>{"use strict";var i=r(828336),n=r(810468);function s(e){this._chartApiInstance=e}s.prototype.searchSymbols=function(e,t,r,i,n,s){this._chartApiInstance.searchSymbols(e,t,r,i,n,!1,void 0,!1,null,function(e){e.forEach((function(e){e.flag=this.getFlagIdBySymbolExt(e)}),this),s(e)}.bind(this))},s.prototype.displayedExchanges=function(){var e=i.displayedExchangesFilter(this.supportedExchanges());return i.sortExchangesListByFlagIfNeeded(e)},s.prototype.supportedExchanges=function(){return this._chartApiInstance.supportedExchangesList()},s.prototype.supportedSymbolsTypes=function(){return this._chartApiInstance.supportedSymbolsTypes()},s.prototype.getFlagIdBySymbolExt=function(e){return n.getFlagIdBySymbolInfo(e)},s.prototype.getFlagIdByExchangeInfo=function(e){return e?n.getFlagIdByName(e.flag):""},e.exports=s},828336:(e,t,r)=>{"use strict";var i,n=r(611688),s=r(810468);i=function(e,t){var r=new RegExp("country-([a-z*_]+)","i"),i=s.supportedFlags().filter((function(e){return"forex"!==e&&"bitcoin"!==e&&"crypto"!==e})).sort(),n=["forex","country-usa","country-canada","country-ae","country-uk","country-europe","country-germany","country-ireland","country-italy","country-luxembourg","country-austria","country-norway","country-spain","country-poland","country-sweden","country-switzerland","country-turkey","country-israel","country-argentina","country-australia","country-brasil","country-mexico","country-peru","country-chile","country-colombia","country-new_zealand","country-brasil","country-india","country-japan","country-china","country-hong_kong","country-singapore","country-taiwan","country-russia","country-malaysia","country-bahrain","country-egypt","country-saudi_arabia","country-serbia","country-*","bitcoin","crypto"];t&&t.order&&(n=t.order);var a={};s.supportedFlags().forEach((function(e){a[e]=[]}));var o=[];function l(e){var t=a[e];t&&(o=o.concat(t.sort((function(e,t){return e.name.localeCompare(t.name)}))),delete a[e])}return e.forEach((function(e){e.flag&&a[e.flag].push(e),e.value||o.push(e)})),n.forEach((function(e){if("forex"===e||"bitcoin"===e||"crypto"===e)l(e);else{var t=r.exec(e),n=t&&t[1];"*"===n?i.forEach((function(e){l(e)})):l(n)}})),Object.keys(a).forEach((function(e){l(e)})),o},e.exports.displayedExchangesFilter=function(e){return n.enabled("symbol_search_limited_exchanges")&&(e=e.filter((function(e){return!("bitcoin"===e.flag||"crypto"===e.flag||e.hideInSymbolSearch)}))),e},e.exports.sortExchangesListByFlagIfNeeded=function(e){return n.enabled("symbol_search_flags")&&(e=i(e)),e}},
810468:e=>{"use strict";var t={ae:"flag-ae",argentina:"flag-ar",canada:"flag-ca",colombia:"flag-co",bitcoin:"flag-btc",brasil:"flag-br",uk:"flag-uk",gb:"flag-uk",usa:"flag-us",egypt:"flag-eg",europe:"flag-eu",russia:"flag-ru",japan:"flag-jp",indonesia:"flag-id",india:"flag-in",forex:"flag-fx",luxembourg:"flag-lu",mexico:"flag-mx",germany:"flag-de",ireland:"flag-ie",italy:"flag-it",qatar:"flag-qa",peru:"flag-pe",spain:"flag-es",saudi_arabia:"flag-sa",serbia:"flag-rs",south_africa:"flag-za",sweden:"flag-se",switzerland:"flag-ch",turkey:"flag-tr",norway:"flag-no",austria:"flag-at",australia:"flag-au",new_zealand:"flag-nz",hong_kong:"flag-hk",taiwan:"flag-tw",thailand:"flag-th",singapore:"flag-sg",south_korea:"flag-kr",poland:"flag-pl",israel:"flag-il",chile:"flag-cl",china:"flag-cn",malaysia:"flag-my",bahrain:"flag-bh",nigeria:"flag-ng",finland:"flag-fi",iceland:"flag-is",denmark:"flag-dk",lithuania:"flag-lt",estonia:"flag-ee",latvia:"flag-lv",vietnam:"flag-vn",netherlands:"flag-nl",belgium:"flag-be",portugal:"flag-pt",france:"flag-fr",greece:"flag-gr",korea:"flag-kr",philippines:"flag-ph"},r={gb:"flag-uk"},i={FXCM:!0,OANDA:!0,FOREXCOM:!0,"FOREX.com":!0,FX_IDC:!0,FX:!0,IDC:!0};function n(e){return e?r[e]||"flag-"+e:""}e.exports.supportedFlags=function(){return Object.keys(t)},e.exports.getFlagIdByName=function(e){return e&&t[e]?t[e]:""},e.exports.getFlagIdBySymbolInfo=function(e){if(!e)return"";var t="";if(e.country)t=n(e.country&&e.country.toLowerCase());else if(e.rootItem){t=n(e.rootItem.country&&e.rootItem.country.toLowerCase())}else"forex"===e.type||!0===i[e.exchange]?t="flag-fx":"bitcoin"!==e.type&&"crypto"!==e.type||(t="flag-btc");return t}},210081:(e,t,r)=>{"use strict";r.d(t,{TradingViewApiBase:()=>v});var i=r(583912),n=r(333126),s=r(84123),a=r(981033),o=r(103669),l=r(988534),c=r(290382),h=r(345848),d=r(440135),u=r(909740),g=r(97639),m=r.n(g);class p{constructor(e){this._toolbarThemeChanged=new(m()),this._onWatchedThemeChanged=e=>{this._toolbarThemeChanged.fire(e)},this._opts=e,u.watchedTheme.subscribe(this._onWatchedThemeChanged)}destroy(){u.watchedTheme.unsubscribe(this._onWatchedThemeChanged)}isStdTheme(){const e=this._opts.chartWidgetCollection.getAll().every(e=>(0,d.isStdTheme)((0,d.extractThemeFromModel)(e.model())));return Promise.resolve(e)}async setStdTheme(e,t=!0,r){await(0,d.loadTheme)(e,!0,!1,this._opts.chartWidgetCollection,t,r)}setStdThemeForLayout(e,t=!0){(0,u.setTheme)(e),t&&(0,d.syncTheme)()}getCurrentThemeName(){return(0,d.getCurrentTheme)().name}toolbarThemeChanged(){return this._toolbarThemeChanged}}var _=r(741511),f=r(308170);class v{constructor(e){this._studyTemplatesDrawer=null,this._fontIconsSettingsDrawer=null,this._favoriteDrawingsToolbar=null,this._themesApi=null;const{chartApiInstance:t,chartWidgetCollection:r,studyMarket:n,financialsDialog:l,saveChartService:c,loadChartService:h,sharingChartService:d=null}=e;this._chartWidgetCollection=r,this._studyMarket=n,this._financialsDialog=l,this._saveChartService=c,this._sharingChartService=d,this._loadChartLayoutDialog=h,
this._intervalsService=new s.IntervalsService(t),this._alertsWidgetDialog=new a.AlertsWidgetDialog(()=>r.activeChartWidget.value()),this._detailsDialogController=o.DetailsDialogController.getInstance(),this._supportedChartStylesSpawn=i.linking.supportedChartStyles.spawn(),this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(null,()=>this.destroy(),!0)}destroy(){var e,t;this._supportedChartStylesSpawn.destroy(),null===(e=this._intervalsService)||void 0===e||e.destroy(),null===(t=this._themesApi)||void 0===t||t.destroy()}themes(){return null===this._themesApi&&(this._themesApi=new p({chartWidgetCollection:this._chartWidgetCollection})),this._themesApi}dialogs(){var e,t,r,i,s,a;return{Indicators:this._studyMarket,Financials:this._financialsDialog,Compare:this._chartWidgetCollection.getCompareDialogRenderer(),ObjectsTree:n.ObjectTreeDialogController.getInstance(),ChartProperties:this._chartWidgetCollection.getChartPropertiesDialogRenderer(),ChartLayoutSaveAs:null!==(t=null===(e=this._saveChartService)||void 0===e?void 0:e.getSaveAsController())&&void 0!==t?t:null,ChartLayoutRename:null!==(i=null===(r=this._saveChartService)||void 0===r?void 0:r.getRenameController())&&void 0!==i?i:null,ChartLayoutCreate:null!==(a=null===(s=this._saveChartService)||void 0===s?void 0:s.getCreateController())&&void 0!==a?a:null,ChartLayoutLoad:this._loadChartLayoutDialog,Alerts:this._alertsWidgetDialog,Details:this._detailsDialogController,FinancialsCharts:l.FinancialsDialogController.getInstance()}}studyTemplatesDrawerApi(){return Promise.all([r.e(69129),r.e(86363),r.e(15998),r.e(53466),r.e(87836),r.e(94763),r.e(73944),r.e(56909),r.e(81112),r.e(14474),r.e(59685),r.e(81086),r.e(75514),r.e(17170)]).then(r.bind(r,916838)).then(e=>(this._studyTemplatesDrawer||(this._studyTemplatesDrawer=new e.ToolWidgetTemplatesDrawerMenuRenderer(this._chartWidgetCollection)),this._studyTemplatesDrawer))}fontIconsSettingsDrawer(){return Promise.all([r.e(69129),r.e(53466),r.e(94763),r.e(86009),r.e(5875),r.e(75514),r.e(64558)]).then(r.bind(r,275714)).then(e=>(this._fontIconsSettingsDrawer||(this._fontIconsSettingsDrawer=new e.FontIconsSettingsDrawerApi),this._fontIconsSettingsDrawer))}intervalsService(){return this._intervalsService}supportedChartTypes(){return this._supportedChartStylesSpawn}setBrokerName(e){this._chartWidgetCollection.setBroker(e)}drawOnAllChartsMode(e){(0,f.drawOnAllChartsMode)().setValue(e)}disableTrackingEvents(){(0,h.disableTrackingEvents)()}setSymbolSearchUI(e){c.SymbolSearchUI.setProvider({getSymbol:()=>e.getSymbol()})}setLayout(e,t){(null==t?void 0:t.withUndo)?this._chartWidgetCollection.setChartLayoutWithUndo(e):this._chartWidgetCollection.setLayout(e)}selectLineTool(e,t){if(!_.supportedLineTools[e])return;const r=_.supportedLineTools[e].name;if("icon"===e){const e=null==t?void 0:t.icon;void 0!==e&&f.iconTool.setValue(e)}f.tool.setValue(r)}favoriteDrawingsToolbar(){return Promise.all([r.e(43251),r.e(65551)]).then(r.bind(r,726481)).then(e=>(this._favoriteDrawingsToolbar||(this._favoriteDrawingsToolbar=new e.FavoriteDrawingsApi),
this._favoriteDrawingsToolbar))}sharingChart(){return this._sharingChartService}}},108494:(e,t,r)=>{"use strict";var i=r(97639),n=r(262325),s=r(583912).linking,a=(r(579917).createDeferredPromise,r(982405)),o=r(467608).layouts,l=r(251954),c=r(1891).ContextMenuManager,h=r(308170),d=r(364019),u=r(602466).backend,g=r(911905),m=r(779923).showWarning,p=r(779923).showConfirm,_=r(741511),f=r(332450).CLOSE_POPUPS_AND_DIALOGS_COMMAND,v=r(273044).Interval,b=r(346090).saveDefaultProperties,S=r(911730).ChartChangesWatcher,y=r(210081).TradingViewApiBase,w=(r(970028),r(591316).getStudyInputsInfo,r(63208).CollectionViewMode),C=r(231780),T=r(501867),I=r(246433).ConnectionStatus,A=r(110933),W=A.tradingService,P=A.waitTradingService,D=r(360025).publishChart,L=r(360025).setPublishChartOptions,E=r(619101).showSupportDialog,M=r(901285),k=M.openMobileChartPickerCommand,x=M.closeMobileChartPickerCommand,R=r(915150).AlertService,F=r(66066).ReplayApi,O=r(629588),B=O.createGoProDialog,V=O.onGoProDialog;e.exports=class extends y{constructor(e){const{chartWidgetCollection:t,saveChartService:r,loadChartService:n,sharingChartService:a,alertsDispatcher:o,supportTicketData:l,favoriteServices:c,chartApiInstance:h=null,studyMarket:d=null,financialsDialog:u=null}=e;super({chartApiInstance:h,chartWidgetCollection:t,studyMarket:d,financialsDialog:u,saveChartService:r,loadChartService:n,sharingChartService:a}),this._chartApiInstance=h,this._loadChartService=n,this._alertsDispatcher=o,this._supportTicketData=l,this._favoriteServices=c,this._proxyWatchListChangedDelegate=null,this._lockDrawingsWatchedValue=null,this._hideDrawingsWatchedValue=null,this._hideIndicatorsWatchedValue=null,this._magnetEnabledWatchedValue=null,this._magnetModeWatchedValue=null,this._replayApi=null,this._chartChangesWatcher=null,this._hasChartChangesWatchedValue=null,this._getDataSourceHub=function(){return t.activeChartWidget.value().model().model()},this._chartWidgetCollection.getResizerDetacher=function(){return t.activeChartWidget.value().getResizerDetacher()},this._alertService=this._alertsDispatcher?new R(this._alertsDispatcher,this._getDataSourceHub):null,this._activeChangedChangedDelegate=new i,this._chartWidgetCollection.activeChartWidget.subscribe(function(){this._activeChangedChangedDelegate.fire()}.bind(this)),this._chartWidgets=new WeakMap,this._activateChart=function(e){t.activeChartWidget.setValue(e)},this.linking=s}subscribe(e,t){l.subscribe(e,t)}unsubscribe(e,t){l.unsubscribe(e,t)}onContextMenu(e){l.subscribe("onContextMenu",(function(t){t.callback(e(t.unixtime,t.price))}))}onGrayedObjectClicked(e){l.subscribe("onGrayedObjectClicked",e)}activeChart(){return this._getChartWidgetApi(this._chartWidgetCollection.activeChartWidget.value())}_getChartWidgetApi(e){var t=this._chartWidgets.get(e);return void 0===t&&(t=new a(e,this._activateChart.bind(null,e)),this._chartWidgets.set(e,t)),t}onActiveChartChanged(){return this._activeChangedChangedDelegate}changeSymbol(e,t,r){s.interval.setValue(v.normalize(t)),s.symbol.setValue(e),
r&&this.activeChart().onDataLoaded().subscribe(null,r,!0)}layout(){return this._chartWidgetCollection.layout.value()}layoutName(){return this._chartWidgetCollection.metaInfo.name.value()}layoutNameWatchedValue(){return this._chartWidgetCollection.metaInfo.name.readonly()}layoutSettingsDrawer(){return Promise.all([r.e(53466),r.e(94763),r.e(44408),r.e(20976),r.e(70637),r.e(83231),r.e(17601),r.e(75514),r.e(45289)]).then(r.bind(r,126582)).then(function(e){return this._layoutSettingsDrawer||(this._layoutSettingsDrawer=new e.LayoutSettingsDrawerApi(this._chartWidgetCollection)),this._layoutSettingsDrawer}.bind(this))}chartsCount(){return o[this.layout()].count}viewMode(){return this._chartWidgetCollection.viewMode.readonly().value()}viewModeWatchedValue(){return this._chartWidgetCollection.viewMode.readonly()}setForceFullscreenMode(){this._chartWidgetCollection.setViewMode(w.ForceFullscreen),this._chartWidgetCollection.getResizerDetacher().requestFullscreen()}setMultichartMode(){this._chartWidgetCollection.setViewMode(w.Multichart),this._chartWidgetCollection.getResizerDetacher().exitFullscreen()}setActiveChart(e){if(e>=0&&e<this.chartsCount()){var t=this._chartWidgetCollection.getAll()[e];t&&(this._chartWidgetCollection.getResizerDetacher().fullscreen.value()?t.requestFullscreen():this._chartWidgetCollection.activeChartWidget.setValue(t))}}chart(e){if(void 0===e&&(e=0),e<0||e>=this.chartsCount())throw Error("Incorrect index: "+e);return this._getChartWidgetApi(this._chartWidgetCollection.getAll()[e])}getSymbolInterval(e){var t={symbol:s.symbol.value(),interval:s.interval.value()};return e&&e(t),t}saveChart(e){if(this._saveChartService){var t=this;this._saveChartService.whenReadyToSave((function(){var r=t._saveChartService.saveToJSON();return e&&e(JSON.parse(r.content))}))}}loadChart(e){throw new Error("Not implemented")}getStudiesList(){throw new Error("Not implemented")}getStudyInputs(e){throw new Error("Not implemented")}getSavedCharts(e){u.getCharts().then(e)}loadChartFromServer(e){u.loadChart(e)}saveChartToServer(e,t,r){this._saveChartService&&this._saveChartService.saveChartSilently(e,t,r)}setAutosave(e){this._saveChartService&&this._saveChartService.autoSaveEnabled().setValue(e)}removeChartFromServer(e,t){u.removeChart(e).then(t)}getIntervals(){var e=[],t=d.getCustomResolutions();return null!==this._chartApiInstance&&(e=this._chartApiInstance.defaultResolutions()),d.mergeResolutions(e,t)}closePopupsAndDialogs(){c.hideAll(),l.emit(f)}selectedLineTool(){for(var e=Object.keys(_.supportedLineTools),t=h.tool.value(),r=0;r<e.length;++r)if(_.supportedLineTools[e[r]].name===t)return e[r];return""}lockAllDrawingTools(){return null===this._lockDrawingsWatchedValue&&(this._lockDrawingsWatchedValue=new n(h.lockDrawings().value()),this._lockDrawingsWatchedValue.subscribe((function(e){h.lockDrawings().setValue(e)})),h.lockDrawings().subscribe(this,(function(){this._lockDrawingsWatchedValue.setValue(h.lockDrawings().value())}))),this._lockDrawingsWatchedValue}hideAllDrawingTools(){
return null===this._hideDrawingsWatchedValue&&(this._hideDrawingsWatchedValue=new n(h.hideAllDrawings().value()),this._hideDrawingsWatchedValue.subscribe((function(e){h.hideAllDrawings().setValue(e)})),h.hideAllDrawings().subscribe(this,(function(){this._hideDrawingsWatchedValue.setValue(h.hideAllDrawings().value())}))),this._hideDrawingsWatchedValue}hideAllIndicators(){return null===this._hideIndicatorsWatchedValue&&(this._hideIndicatorsWatchedValue=new n(h.hideAllIndicators().value()),this._hideIndicatorsWatchedValue.subscribe((function(e){h.hideAllIndicators().setValue(e)})),h.hideAllIndicators().subscribe(this,(function(){this._hideIndicatorsWatchedValue.setValue(h.hideAllIndicators().value())}))),this._hideIndicatorsWatchedValue}magnetEnabled(){return null===this._magnetEnabledWatchedValue&&(this._magnetEnabledWatchedValue=new n(h.properties().magnet.value()),this._magnetEnabledWatchedValue.subscribe((function(e){b(!0),h.properties().magnet.setValue(e),b(!1)})),h.properties().magnet.subscribe(this,(function(){this._magnetEnabledWatchedValue.setValue(h.properties().magnet.value())}))),this._magnetEnabledWatchedValue}magnetMode(){return null===this._magnetModeWatchedValue&&(this._magnetModeWatchedValue=new n(h.properties().magnetMode.value()),this._magnetModeWatchedValue.subscribe((function(e){b(!0),h.properties().magnetMode.setValue(e),b(!1)})),h.properties().magnetMode.subscribe(this,(function(){this._magnetModeWatchedValue.setValue(h.properties().magnetMode.value())}))),this._magnetModeWatchedValue}mainSeriesPriceFormatter(){return this._chartWidgetCollection.activeChartWidget.value().model().mainSeries().priceScale().formatter()}showNoticeDialog(e){m({title:(e=e||{}).title,text:e.body||"",onClose:e.callback})}showConfirmDialog(e){if(!(e=e||{}).callback)throw Error("callback must be exist");var t=e.callback;function r(e){t&&(t(e),t=null)}p({title:e.title,text:e.body||"",onClose:function(){r(!1)},onConfirm:function(e){r(!0),e.dialogClose()}})}logs(){return{getLogHistory:g.getLogHistory,enable:g.loggingOn,disable:g.loggingOff}}watchlist(){throw new Error("not implemented")}setWatchlistApiPromise(e){throw new Error("not implemented")}news(){throw new Error("not implemented")}setNewsApiPromise(e){throw new Error("not implemented")}showLoadChartDialog(){var e=this._loadChartService;e&&e.showLoadDialog()}showSaveAsChartDialog(){var e=this._saveChartService;e&&window.runOrSignIn((function(){e.saveChartAs()}),{source:"Save as chart dialogue"})}drawOnAllCharts(e){return h.drawOnAllCharts().setValue(e)}undoRedoState(){return this._chartWidgetCollection.undoHistory.state()}clearUndoHistory(){return this._chartWidgetCollection.undoHistory.clearStack()}undo(){return this._chartWidgetCollection.undoHistory.undo()}redo(){return this._chartWidgetCollection.undoHistory.redo()}trading(){return W()}waitTrading(){return P()}symbolSearch(){return this._chartApiInstance?new C(this._chartApiInstance):null}saveChartOrShowTitleDialog(e,t,r){var i=this._saveChartService;i&&i.saveChartOrShowTitleDialog(e,t,r)}showRenameChartDialog(){
var e=this._saveChartService;e&&e.renameChart()}setUserInfo(e){e&&(!1===e.profile_data_filled&&delete e.profile_data_filled,window.loginUser(e))}connect(){this._chartApiInstance.connected()||this._chartApiInstance.connect(),T.forceConnect()}disconnect(){this._chartApiInstance.connected()&&this._chartApiInstance.disconnect(),T.isConnected()&&T.disconnect()}loginRequired(){return window.loginRequiredDelegate}onConnectionStatusChanged(e){T.onStatus(e)}isConnected(){return T.status()===I.Open}showCreateAlertDialog(){this._alertsDispatcher&&this._alertsDispatcher.openCreateDialog({dataSourceHub:this._getDataSourceHub(),actionSource:"tv_api"})}alertService(){return this._alertService}publishChart(e){return D(e,!1)}setPublishChartOptions(e){L(e)}showSupportDialog(){E()}openMobileChartPicker(){l.emit(k)}closeMobileChartPicker(){l.emit(x)}replayApi(){return null===this._chartApiInstance?Promise.reject(new Error("replay api isn't available")):null!==this._replayApi?Promise.resolve(this._replayApi):Promise.all([r.e(59284),r.e(54170),r.e(90026),r.e(52434),r.e(13710),r.e(14085),r.e(6932)]).then(r.bind(r,182155)).then(function(e){return null===this._replayApi&&(this._replayApi=new F(new e.ReplayUIController(this._chartWidgetCollection,this._chartApiInstance))),this._replayApi}.bind(this))}takeScreenshot(){return this._chartWidgetCollection.takeScreenshot()}setIntervalLinkingEnabled(e){this._chartWidgetCollection.lock.interval.setValue(e)}setTimeFrame(e){this._chartWidgetCollection.setTimeFrame(e)}symbolSync(){return this._chartWidgetCollection.lock.symbol}intervalSync(){return this._chartWidgetCollection.lock.interval}dateRangeSync(){return this._chartWidgetCollection.lock.dateRange}crosshairSync(){return this._chartWidgetCollection.lock.crosshair}timeSync(){return this._chartWidgetCollection.lock.trackTime}startFullscreen(){return this._chartWidgetCollection.startFullscreen()}exitFullscreen(){return this._chartWidgetCollection.exitFullscreen()}takeClientScreenshot(e){return this._chartWidgetCollection.clientSnapshot(e)}getFavoriteIntervalsService(){if(this._favoriteServices)return this._favoriteServices.favoriteIntervalsService;throw new Error("not implemented")}getFavoriteChartStylesService(){if(this._favoriteServices)return this._favoriteServices.favoriteChartStylesService;throw new Error("not implemented")}getLinetoolsFavoritesStore(){if(this._favoriteServices)return this._favoriteServices.lineToolsFavoritesService;throw new Error("not implemented")}supportTicketData(){return this._supportTicketData}hasChartChanges(){return null===this._chartChangesWatcher&&null===this._hasChartChangesWatchedValue&&(this._chartChangesWatcher=new S(this._chartWidgetCollection.undoHistory,this._chartWidgetCollection.lineToolSynchronizerHasChanges,window.saver,l),this._hasChartChangesWatchedValue=new n(this._chartChangesWatcher.hasChanges()),this._chartChangesWatcher.getOnChange().subscribe(this,(function(){this._hasChartChangesWatchedValue.setValue(this._chartChangesWatcher.hasChanges())}))),this._hasChartChangesWatchedValue}
createGoProDialog(e){B(e)}onGoProDialog(e,t){V(e,t)}}},651153:(e,t,r)=>{"use strict";r.d(t,{getAlertEventNotificationsReadableStream:()=>n});var i=r(920358);async function n(){const e=await(0,i.getPriceAlertsDispatcher)();return(await e.getAlertNotifier()).alertEventNotificationsController}},915150:(e,t,r)=>{"use strict";r.d(t,{AlertService:()=>n});var i=r(696329);class n{constructor(e,t){this.ALERT_DIALOG_CREATE_INVOCATION_ID=i.ALERT_DIALOG_CREATE_INVOCATION_ID,this._alertsDispatcher=e,this._getDataSourceHub=t}showCreateAlertDialog(){return new Promise((e,t)=>{this._alertsDispatcher.openCreateDialog({actionSource:"alert_service",dataSourceHub:this._getDataSourceHub(),onDialogOpened:e,onAborted:t})})}getAlertDialogInvocations(){return this._alertsDispatcher.getAlertDialogInvocations()}showEditAlertDialog(e){return new Promise((t,r)=>{this._alertsDispatcher.openEditDialog(e,{actionSource:"alert_service",onDialogOpened:t,onAborted:r})})}restartAlert(e){return new Promise((t,r)=>{this._alertsDispatcher.restartAlert(e,{actionSource:"alert_service",success:t,error:r})})}cloneAlert(e){return new Promise((t,r)=>{this._alertsDispatcher.requestAlert(e,{error:r,success:e=>{this._alertsDispatcher.cloneAlert(e,{actionSource:"alert_service",success:t,error:r})}})})}subscribe(e){this._alertsDispatcher.subscribeToPushStream(e)}unsubscribe(e){this._alertsDispatcher.unsubscribeFromPushStream(e)}}},981033:(e,t,r)=>{"use strict";r.d(t,{AlertsWidgetDialog:()=>h});var i=r(62802),n=r.n(i),s=r(262325),a=r.n(s),o=r(651153),l=r(920358),c=r(539390);class h{constructor(e){this._isVisible=new(a())(!1),this._activeTab=new(a())(function(){const e=n().getValue("alerts.widget_dialog.active_tab");return!e||"list"!==e&&"log"!==e?"list":e}()),this._willShow=!1,this._dialogImpl=null,this._getChartWidget=e,this._activeTab.subscribe(e=>{n().setValue("alerts.widget_dialog.active_tab",e)})}setTab(e){this._activeTab.setValue(e)}show(){this._willShow||(this._willShow=!0,Promise.all([Promise.all([r.e(48463),r.e(69129),r.e(82888),r.e(25113),r.e(34956),r.e(53466),r.e(77962),r.e(46238),r.e(85617),r.e(63921),r.e(78268),r.e(10510),r.e(19042),r.e(19055),r.e(21917),r.e(74321),r.e(12358),r.e(85208),r.e(55382),r.e(49928),r.e(20929),r.e(7444),r.e(93101),r.e(24125),r.e(36315),r.e(75514),r.e(69397),r.e(27984),r.e(92697),r.e(28570),r.e(93541),r.e(61491)]).then(r.bind(r,854059)),(0,l.getPriceAlertsDispatcher)(),(0,o.getAlertEventNotificationsReadableStream)(),(0,c.getGlobalAlertFocusedIdTracker)(),Promise.all([r.e(32377),r.e(31867)]).then(r.bind(r,944855))]).then(([{AlertsWidgetDialogImpl:e},t,r,i,{getUnreadFiresBuffer:n}])=>{this._willShow&&(this._dialogImpl=new e({alertsDispatcher:t,notificationsReadableStream:r,globalFocusedTracker:i,unreadFiresBuffer:window.initData.suppressLegacyAlertsNotifier?n():void 0,onClose:()=>this.hide(),activeTab:this._activeTab,getChartWidget:this._getChartWidget}),this._isVisible.setValue(!0))}))}hide(){this._dialogImpl&&(this._dialogImpl.destroy(),this._dialogImpl=null),this._willShow=!1,this._isVisible.setValue(!1)}visible(){
return this._isVisible}}},539390:(e,t,r)=>{"use strict";r.d(t,{getGlobalAlertFocusedIdTracker:()=>n});var i=r(920358);const n=function(e){let t;return()=>(t||(t=Promise.all([(0,i.getPriceAlertsDispatcher)(),r.e(68553).then(r.bind(r,848524))]).then(([t,{AlertInteractionStateIdTracker:r}])=>new r(t.alerts,e))),t)}("selected")},364251:(e,t,r)=>{"use strict";var i;r.d(t,{PublishIntroDialogContent:()=>i}),function(e){e.Idea="ideaPublishing",e.Script="scriptPublishing",e.Stream="startStreaming",e.VideoIdea="videoIdeaPublishing"}(i||(i={}))},360025:(e,t,r)=>{"use strict";r.r(t),r.d(t,{publishChart:()=>u,publishChartWidget:()=>g,setPublishChartOptions:()=>m});r(823127);var i=r(973286),n=r(364251),s=r(125226),a=r(62802),o=r(823127);let l,c=0;function h(){clearTimeout(c),o(".publish-chart-button").removeClass("process")}async function d(e,t){if(!(0,s.isFeatureEnabled)("show_checkbox_of_house_rules_to_idea_and_script")){if(!0===t||!a.getBool("publish.showIntroText",!0))return window.saver.publishChart(e);const{createWarningPopup:i}=await r.e(63746).then(r.bind(r,317400)),s=await i({type:n.PublishIntroDialogContent.Idea,dataDialogName:"publish-intro-dialog"});a.setValue("publish.showIntroText",!s)}return window.saver.publishChart(e)}function u(e,t){const r={...e,...l};return new Promise(e=>{window.runOrSignIn(()=>{(0,s.isFeatureEnabled)("disable_phone_verification_sms")?e(d(r,t)):(!function(){const e=o(".publish-chart-button");0!==e.length&&(e.addClass("process"),c=setTimeout(h,3e4))}(),(0,i.whenVerified)({showDialog:!0,source:"Publish chart",silentPhoneVerification:null==r?void 0:r.silentPhoneVerification}).done(()=>{e(d(r,t))}).fail(e=>(null==r?void 0:r.onPublishError)&&r.onPublishError(e)).always(h))},{source:"Publish chart",sourceMeta:"Chart"})})}function g(e){u(e,!0)}function m(e){l=e}},126974:(e,t,r)=>{"use strict";r.d(t,{availableTimeFrames:()=>a});r(787236);var i=r(195048),n=r(659192);const s={[i.STATUS_DELAYED]:[n.timeFrames.ytd,n.timeFrames["12m"],n.timeFrames["60m"],n.timeFrames.all],[i.STATUS_READY]:[n.timeFrames["1d"],n.timeFrames["5d"],n.timeFrames["1m"],n.timeFrames["3m"],n.timeFrames["6m"],n.timeFrames.ytd,n.timeFrames["12m"],n.timeFrames["60m"],n.timeFrames.all]};function a(e,t){return t===i.STATUS_DELAYED_STREAMING&&(t=i.STATUS_READY),t===i.STATUS_EOD&&(t=i.STATUS_DELAYED),s[t]||[]}},637936:(e,t,r)=>{"use strict";r.d(t,{pushBackListener:()=>l,disable:()=>c,enable:()=>h});var i=r(95935);const n=[];let s=null;function a(e){for(let t=0;t<n.length;t++)if(n[t].name===e)return t;return-1}function o(e){if(!s)for(let t=n.length-1;t>=0&&!0!==n[t].func(e);t--);}function l(e,t){const r={name:e,func:t},i=a(r.name);i>-1&&n.splice(i,1),n.unshift(r)}function c(){return s?null:(s=(0,i.randomHashN)(4),s)}function h(e){if(e!==s)throw Error("Lock id is outdated");s=null}window.addEventListener("keypress",o,!1)},963239:(e,t,r)=>{"use strict";function i(e){return n(e,null)}function n(e,t){const r=e.files&&e.files.length>0;if(!r&&t&&t.eventPhase>0)return s(t,e),Promise.resolve();if(!r){let t=!1;const r=r=>{
r.stopImmediatePropagation(),s(r,e),t=!0};try{document.addEventListener("copy",r,!0),document.execCommand("copy")}finally{document.removeEventListener("copy",r,!0)}if(t)return Promise.resolve()}return async function(e){if(!navigator.clipboard||!navigator.clipboard.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");const t={};for(const r of e.files||[])t[r.type]=r;e.text&&(t["text/plain"]=e.text);e.html&&(t["text/html"]=e.html);return navigator.clipboard.write([new window.ClipboardItem(t)])}(e)}function s(e,t){e.preventDefault();const r=e.clipboardData;t.text&&r.setData("text/plain",t.text),t.html&&r.setData("text/html",t.html)}async function a(e,t){if("text/plain"===t&&!navigator.clipboard.write){const t=await e;return navigator.clipboard.writeText(await t.text())}if(!navigator.clipboard||!navigator.clipboard.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");let r=null;try{r=new window.ClipboardItem({[t]:e})}catch(i){r=new window.ClipboardItem({[t]:await e})}if(r)return navigator.clipboard.write([r]);throw new Error("ClipboardApi is not supported")}r.r(t),r.d(t,{copyToClipboard:()=>i,writeImpl:()=>n,writePromiseUsingApi:()=>a})},656130:(e,t,r)=>{"use strict";r.d(t,{generateChartUrl:()=>n});var i=r(314802);function n(e){const t=e.chartId?`/chart/${e.chartId}/`:"/chart/",r=new URL(t,location.href);return e.symbol&&r.searchParams.append("symbol",e.symbol),e.interval&&r.searchParams.append("interval",e.interval),e.style&&r.searchParams.append("style",e.style),(0,i.urlWithMobileAppParams)(r.href)}},332450:(e,t,r)=>{"use strict";r.d(t,{CLOSE_POPUPS_AND_DIALOGS_COMMAND:()=>i,breakpointList:()=>n});const i="CLOSE_POPUPS_AND_DIALOGS_COMMAND",n=[1920,1440,1280,1024,768,480,0]},290382:(e,t,r)=>{"use strict";r.d(t,{SymbolSearchUI:()=>a});var i=r(588537),n=r(187545),s=r(583912);class a{async show(e){if(null!==a._provider){const e=await a._provider.getSymbol();return s.linking.symbol.setValue(e.symbol),e}if(a._currentShowingInstance)throw new DOMException("SymbolSearchUI is already shown","InvalidStateError");try{a._currentShowingInstance=this,a.preload();const t=await a._implementation;return(0,i.assert)(null!==t),new Promise(r=>{t.showDefaultSearchDialog({...e,onSearchComplete:e=>{r({symbol:e})}})})}finally{a._currentShowingInstance=null}}static setProvider(e){this._provider=e}static preload(){null===this._provider&&null===this._implementation&&(this._implementation=(0,n.loadNewSymbolSearch)())}}a._currentShowingInstance=null,a._provider=null,a._implementation=null},687795:e=>{"use strict";const t=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520];function r(e){if("string"!=typeof e)throw new Error("string cannot be undefined or null");const t=[];let r=0,n=0;for(;r<e.length;)n+=i(r+n,e),o(e[r+n])&&n++,s(e[r+n])&&n++,a(e[r+n])&&n++,l(e[r+n])?n++:(t.push(e.substring(r,r+n)),r+=n,n=0);return t}function i(e,t){const r=t[e];if(!function(e){return e&&h(e[0].charCodeAt(0),55296,56319)
}(r)||e===t.length-1)return 1;const i=r+t[e+1];let s=t.substring(e+2,e+5);return n(i)&&n(s)||function(e){return h(c(e),127995,127999)}(s)?4:2}function n(e){return h(c(e),127462,127487)}function s(e){return"string"==typeof e&&h(e.charCodeAt(0),65024,65039)}function a(e){return"string"==typeof e&&h(e.charCodeAt(0),8400,8447)}function o(e){return"string"==typeof e&&-1!==t.indexOf(e.charCodeAt(0))}function l(e){return"string"==typeof e&&8205===e.charCodeAt(0)}function c(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536}function h(e,t,r){return e>=t&&e<=r}e.exports=r,e.exports.substr=function(e,t,i){const n=r(e);if(void 0===t)return e;if(t>=n.length)return"";const s=n.length-t;let a=t+(void 0===i?s:i);return a>t+s&&(a=void 0),n.slice(t,a).join("")}},687492:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path d="M13.111 18.5H10.5a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-8.389z"/><path d="M18.5 20v1.5a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1H8"/></g></svg>'},938069:e=>{"use strict";e.exports=JSON.parse('{"4":["v",["h",0,2],["h",1,3]],"6":["v",["h",0,2,4],["h",1,3,5]],"8":["v",["h",0,2,4,6],["h",1,3,5,7]],"2h":["h",0,1],"2v":["v",0,1],"2-1":["v",["h",0,2],1],"3s":["h",0,["v",1,2]],"3h":["h",0,1,2],"3v":["v",0,1,2],"1-2":["v",0,["h",1,2]],"3r":["h",["v",0,1],2],"4h":["h",0,1,2,3],"4v":["v",0,1,2,3],"4s":["h",0,["v",1,2,3]],"1-3":["v",0,["h",1,2,3]],"2-2":["v",["h",0,1],["v",2,3]],"1-4":["v",0,["h",1,2,3,4]],"5s":["h",0,["v",1,2,3,4]],"6c":["v",["h",0,1],["h",2,3],["h",4,5]],"8c":["v",["h",0,1],["h",2,3],["h",4,5],["h",6,7]],"s":0}')}}]);